(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{474:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(2)),r=(a(6),s(a(653))),l=s(a(661)),i=s(a(893));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return n.default.createElement("div",null,"pilot"===e.user.type?n.default.createElement(r.default,e):null,"agent"===e.user.type?n.default.createElement(l.default,e):null,"admin"===e.user.type?n.default.createElement(i.default,e):null)}},492:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(56)),r=m(a(57)),l=m(a(12)),i=m(a(15)),s=m(a(13)),d=m(a(14)),u=a(2),o=m(u),c=m(a(508));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){(0,l.default)(this,t);var e=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={addressVerified:!1,addressSupprted:!0},e.deconstructPlaceIntoState=e.deconstructPlaceIntoState.bind(e),e}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("addressToFilm"),a=new google.maps.places.Autocomplete(t,{componentRestrictions:{country:"us"}});google.maps.event.addListener(a,"place_changed",(function(){var t=a.getPlace();if(t){t.geometry.location.lat(),t.geometry.location.lng();e.normalizeGooglePlace(t)}}))}},{key:"normalizeGooglePlace",value:function(e){var t={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()};e.address_components.forEach((function(e,a){switch(e.types[0]){case"route":t.street=e.long_name;break;case"locality":t.city=e.long_name;break;case"country":t.country=e.long_name;break;case"street_number":t.street_number=e.long_name;break;case"postal_code":t.zip=e.long_name;break;case"administrative_area_level_1":t.state=e.short_name}})),this.deconstructPlaceIntoState(t)}},{key:"deconstructPlaceIntoState",value:function(e){var t=this;c.default.filter((function(t){return t.zipcode===e.zip})).length>0?this.setState({address1:e.street_number+" "+e.street,address2:"",city:e.city,state:e.state,zip:e.zip,lat:e.lat,lng:e.lng},(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({addressVerified:!0,addressSupprted:!0}),t.props.handleReturnedLocation(t.state);case 2:case"end":return e.stop()}}),e,t)})))):this.setState({addressSupprted:!1})}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("div",{className:"relative"},o.default.createElement("input",{type:"textfield",className:"input pl-8",id:"addressToFilm"}),o.default.createElement("span",{className:"input-icon pin-l"},o.default.createElement("i",{className:"fa fa-home"}))),o.default.createElement("div",{className:"error-area hide-error "+(this.state.addressSupprted?"":"show-error")},"Unfortunatley the area you selected is not supported yet. Please be patient and check back soon."))}}]),t}(u.Component);t.default=f},496:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query ($input: OrderCollectionInput){\n    getOrders(input: $input){\n      count\n      orders {\n        id\n        plan\n        status\n        receiptId\n        pilotAcceptedAt\n        agentAcceptedAt\n        createdAt\n        updatedAt\n        pilotBounty\n        pilotDistance\n        needsAttention\n        distanceFromLocation\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        agent {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        pilot {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        assets {\n          id\n          name\n          type\n          url\n        }\n      }\n    }\n  }\n"],["\n  query ($input: OrderCollectionInput){\n    getOrders(input: $input){\n      count\n      orders {\n        id\n        plan\n        status\n        receiptId\n        pilotAcceptedAt\n        agentAcceptedAt\n        createdAt\n        updatedAt\n        pilotBounty\n        pilotDistance\n        needsAttention\n        distanceFromLocation\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        agent {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        pilot {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        assets {\n          id\n          name\n          type\n          url\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},497:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(2)),r=a(16),l=i(a(664));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.size||"medium";return n.default.createElement("figure",{className:""+(0,r.css)(l.default.image,l.default[t])},e.src?n.default.createElement("img",{src:e.src,className:(0,r.css)(l.default.imgTag,l.default["img"+t])}):n.default.createElement("img",{src:"/"+a(665)("./"+(Math.floor(12*Math.random())+1)+".png"),className:(0,r.css)(l.default.imgTag,l.default["img"+t])}))}},508:function(e){e.exports=JSON.parse('[{"zipcode":"92602","city":"Irvine","county":"Orange County"},{"zipcode":"92603","city":"Irvine","county":"Orange County"},{"zipcode":"92604","city":"Irvine","county":"Orange County"},{"zipcode":"92605","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92606","city":"Irvine","county":"Orange County"},{"zipcode":"92607","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92607","city":"Laguna Niguel","county":"Orange County"},{"zipcode":"92609","city":"El Toro","county":"Orange County"},{"zipcode":"92609","city":"Lake Forest","county":"Orange County"},{"zipcode":"92610","city":"El Toro","county":"Orange County"},{"zipcode":"92610","city":"Foothill Ranch","county":"Orange County"},{"zipcode":"92612","city":"Irvine","county":"Orange County"},{"zipcode":"92614","city":"Laguna Niguel","county":"Orange County"},{"zipcode":"92609","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92609","city":"Lake Forest","county":"Orange County"},{"zipcode":"92610","city":"El Toro","county":"Orange County"},{"zipcode":"92610","city":"Foothill Ranch","county":"Orange County"},{"zipcode":"92612","city":"Irvine","county":"Orange County"},{"zipcode":"92614","city":"Irvine","county":"Orange County"},{"zipcode":"92615","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92616","city":"Irvine","county":"Orange County"},{"zipcode":"92618","city":"Irvine","county":"Orange County"},{"zipcode":"92619","city":"Irvine","county":"Orange County"},{"zipcode":"92620","city":"Irvine","county":"Orange County"},{"zipcode":"92623","city":"Irvine","county":"Orange County"},{"zipcode":"92624","city":"Capistrano Beach","county":"Orange County"},{"zipcode":"92624","city":"Dana Point","county":"Orange County"},{"zipcode":"92625","city":"Corona Del Mar","county":"Orange County"},{"zipcode":"92626","city":"Costa Mesa","county":"Orange County"},{"zipcode":"92627","city":"Costa Mesa","county":"Orange County"},{"zipcode":"92628","city":"Costa Mesa","county":"Orange County"},{"zipcode":"92629","city":"Monarch Bay","county":"Orange County"},{"zipcode":"92629","city":"Monarch Beach","county":"Orange County"},{"zipcode":"92629","city":"Dana Point","county":"Orange County"},{"zipcode":"92630","city":"El Toro","county":"Orange County"},{"zipcode":"92630","city":"Lake Forest","county":"Orange County"},{"zipcode":"92629","city":"Dana Point","county":"Orange County"},{"zipcode":"92630","city":"El Toro","county":"Orange County"},{"zipcode":"92630","city":"Lake Forest","county":"Orange County"},{"zipcode":"92637","city":"Laguna Hills","county":"Orange County"},{"zipcode":"92646","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92647","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92648","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92649","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92637","city":"Laguna Hills","county":"Orange County"},{"zipcode":"92646","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92647","city":"Huntington Beach","county":"Orange County"},{"zipcode":"92650","city":"East Irvine","county":"Orange County"},{"zipcode":"92650","city":"Irvine","county":"Orange County"},{"zipcode":"92651","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92652","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92653","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92653","city":"Aliso Viejo","county":"Orange County"},{"zipcode":"92653","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92653","city":"Laguna Hills","county":"Orange County"},{"zipcode":"92654","city":"Laguna Woods","county":"Orange County"},{"zipcode":"92654","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92654","city":"Laguna Hills","county":"Orange County"},{"zipcode":"92655","city":"Midway City","county":"Orange County"},{"zipcode":"92656","city":"Aliso Viejo","county":"Orange County"},{"zipcode":"92656","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92656","city":"Laguna Hills","county":"Orange County"},{"zipcode":"92657","city":"Newport Coast","county":"Orange County"},{"zipcode":"92657","city":"Newport Coast","county":"Orange County"},{"zipcode":"92658","city":"Newport Coast","county":"Orange County"},{"zipcode":"92659","city":"Newport Coast","county":"Orange County"},{"zipcode":"92660","city":"Newport Coast","county":"Orange County"},{"zipcode":"92661","city":"Newport Coast","county":"Orange County"},{"zipcode":"92662","city":"Newport Coast","county":"Orange County"},{"zipcode":"92663","city":"Newport Coast","county":"Orange County"},{"zipcode":"92672","city":"San Clemente","county":"Orange County"},{"zipcode":"92673","city":"San Clemente","county":"Orange County"},{"zipcode":"92674","city":"San Clemente","county":"Orange County"},{"zipcode":"92675","city":"Mission Viejo","county":"Orange County"},{"zipcode":"92675","city":"San Juan Capistrano","county":"Orange County"},{"zipcode":"92676","city":"Silverado","county":"Orange County"},{"zipcode":"92677","city":"Laguna Beach","county":"Orange County"},{"zipcode":"92677","city":"Laguna Niguel","county":"Orange County"},{"zipcode":"92678","city":"Trabuco","county":"Orange County"},{"zipcode":"92679","city":"Coto De Caza","county":"Orange County"},{"zipcode":"92679","city":"Dove Canyon","county":"Orange County"},{"zipcode":"92679","city":"Portola Hills","county":"Orange County"},{"zipcode":"92679","city":"Robinson Ranch","county":"Orange County"},{"zipcode":"92679","city":"Trabuco Cyn","county":"Orange County"},{"zipcode":"92679","city":"Trabuco","county":"Orange County"},{"zipcode":"92683","city":"Westminster","county":"Orange County"},{"zipcode":"92684","city":"Westminster","county":"Orange County"},{"zipcode":"92685","city":"Westminster","county":"Orange County"},{"zipcode":"92688","city":"Rancho Santa Margarita","county":"Orange County"},{"zipcode":"92690","city":"Mission Viejo","county":"Orange County"},{"zipcode":"92690","city":"San Juan Capistrano","county":"Orange County"},{"zipcode":"92691","city":"Mission Viejo","county":"Orange County"},{"zipcode":"92691","city":"San Juan Capistrano","county":"Orange County"},{"zipcode":"92692","city":"Mission Viejo","county":"Orange County"},{"zipcode":"92692","city":"San Juan Capistrano","county":"Orange County"},{"zipcode":"92693","city":"San Juan Capistrano","county":"Orange County"},{"zipcode":"92694","city":"Ladera Ranch","county":"Orange County"},{"zipcode":"92694","city":"Mission Viejo","county":"Orange County"}]')},515:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(a(12)),r=x(a(15)),l=x(a(13)),i=x(a(14)),s=a(2),d=x(s),u=a(29),o=a(259),c=a(82),m=(x(a(0)),x(a(681))),f=x(a(687)),p=x(a(722)),h=x(a(724)),g=(x(a(883)),x(a(884))),v=x(a(885)),y=x(a(888)),b=x(a(36)),E=(x(a(499)),x(a(531))),N=x(a(262));function x(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={mapDirectionsVisible:!1},e.handleMapLoaded=e.handleMapLoaded.bind(e),e.userTypeContent=e.userTypeContent.bind(e),e.userTypeSidebar=e.userTypeSidebar.bind(e),e.updateCallback=e.updateCallback.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMapLoaded",value:function(e){var t=e.distance,a=e.duration,n=this.props.data.getOrder.order,r=(0,o.find)((0,o.propEq)("name",n.plan))(N.default);this.setState({duration:a,pilotDistance:t,pilotBounty:Math.round(parseInt(r?r.bounty:0)),mapDirectionsVisible:!!n.pilot})}},{key:"updateCallback",value:function(e){this.props.data.startPolling(5e3)}},{key:"userTypeContent",value:function(e){var t=e.order,a=e.user;return"admin"===a.type?d.default.createElement(f.default,{order:t}):"pilot"===a.type?d.default.createElement(h.default,{order:t,updateCallback:this.updateCallback,duration:this.state.duration,distance:this.state.pilotDistance,bounty:this.state.pilotBounty}):d.default.createElement(p.default,{order:t})}},{key:"userTypeSidebar",value:function(e){var t=e.order,a=e.user;return"pilot"===a.type?d.default.createElement(y.default,{htf:t.address,location:a.address,directionsVisible:!!t.pilot,returnMapInfo:this.handleMapLoaded}):d.default.createElement(m.default,{listing:t.listing,order:t})}},{key:"userTypeResult",value:function(e){var t=e.order,a=e.user;if("admin"===a.type){if("awaiting_review"===t.status)return d.default.createElement(v.default,{order:t,history:this.props.history,assetNames:["images","video_wm","video_og"],user:a,updateCallback:this.updateCallback});if("final_processing"===t.status)c.toast.info("Finalizing processing",{});else if("approved_completed"===t.status)return d.default.createElement(g.default,{order:t,assetNames:["photo","video_og"],user:a})}else{if("pilot"===a.type)return null;if("approved_completed"===t.status)return d.default.createElement(g.default,{order:t,assetNames:["photo","video_og"],user:a})}}},{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.getOrder,n=(0,b.default)(localStorage.getItem("hf_auth_header_token"));return t?d.default.createElement("div",null,"Loading..."):(("admin"===n.type&&"approved_completed"===a.order.status||"pilot"===n.type&&"awaiting_review"===a.order.status)&&this.props.data.stopPolling(),d.default.createElement("div",null,d.default.createElement("div",{className:"container py-8"},d.default.createElement("div",{className:"flex flex-wrap md:-mx-4"},d.default.createElement("div",{className:"w-full md:w-3/5"},d.default.createElement("div",{className:"p-4"},this.userTypeContent({order:a.order,user:n}))),d.default.createElement("div",{className:"w-full md:w-2/5"},d.default.createElement("div",{className:"p-4"},this.userTypeSidebar({order:a.order,user:n})))),d.default.createElement("div",{className:"boogie"},this.userTypeResult({order:a.order,user:n})))))}}]),t}(s.Component);t.default=(0,u.compose)((0,u.graphql)(E.default,{options:function(e){return{variables:{input:{id:e.orderid,authorizedId:(0,b.default)(localStorage.getItem("hf_auth_header_token")).id}}}}}))(_)},518:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query getAssets($input: AssetCollectionInput){\n    getAssets(input: $input){\n      assets {\n        id\n        assetableId\n        assetableName\n        name\n        type\n        url\n        awsId\n        active\n        default\n        createdAt\n      }\n    }\n  }\n"],["\n  query getAssets($input: AssetCollectionInput){\n    getAssets(input: $input){\n      assets {\n        id\n        assetableId\n        assetableName\n        name\n        type\n        url\n        awsId\n        active\n        default\n        createdAt\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},529:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(12)),r=p(a(15)),l=p(a(13)),i=p(a(14)),s=a(2),d=p(s),u=a(29),o=a(259),c=p(a(717)),m=p(a(719)),f=p(a(530));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={prevNotesOpen:!1},a.toggleNoteVisibilty=a.toggleNoteVisibilty.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"toggleNoteVisibilty",value:function(){this.setState({prevNotesOpen:!this.state.prevNotesOpen})}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.loading,n=t.getNotes;if(a)return d.default.createElement("div",null);var r=n.notes.length>0?(0,o.splitAt)(n.notes.length-2,n.notes):null;return d.default.createElement("div",{id:this.props.model+"_"+this.props.modelId+"_notes",className:"notes"},d.default.createElement("div",{className:"flex"},d.default.createElement("div",{className:"mr-4 font-bold flex-1"},this.props.title),n.notes.length>2?d.default.createElement("div",{className:""},d.default.createElement("a",{onClick:this.toggleNoteVisibilty},"View previous notes")):null),d.default.createElement("div",{id:this.props.model+"_"+this.props.modelId+"_prev_notes",className:"prev-container "+(this.state.prevNotesOpen?" open":"")},r&&r[0].length>0?r[0].map((function(t,a){return d.default.createElement("div",{key:e.props.model+"_"+e.props.modelId+"_note_"+t.id+"_prev_"+a,className:"mb-4"},d.default.createElement(c.default,{note:t,model:e.props.model,modelId:e.props.modelId}))})):null),d.default.createElement("div",{id:this.props.model+"_"+this.props.modelId+"_new_notes"},r&&r[1].length>0?r[1].map((function(t,a){return d.default.createElement("div",{key:e.props.model+"_"+e.props.modelId+"_note_"+t.id+"_new_"+a},d.default.createElement(c.default,{note:t,model:e.props.model,modelId:e.props.modelId}))})):null),d.default.createElement("div",{id:this.props.model+"_"+this.props.modelId+"_notes_form"},d.default.createElement(m.default,{model:this.props.model,modelId:this.props.modelId,placeholderText:this.props.placeholderText})))}}]),t}(s.Component);t.default=(0,u.graphql)(f.default,{options:function(e){return{variables:{input:{model:e.model,modelId:e.modelId}}}}})(h)},530:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query getNotes($input: NoteCollectionInput){\n    getNotes(input: $input){\n      notes {\n        id\n        author{\n          id\n          type\n          name\n          email\n          avatar{\n            id\n            url\n          }\n        }\n        body\n        visibility\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"],["\n  query getNotes($input: NoteCollectionInput){\n    getNotes(input: $input){\n      notes {\n        id\n        author{\n          id\n          type\n          name\n          email\n          avatar{\n            id\n            url\n          }\n        }\n        body\n        visibility\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},531:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query getOrder($input: GetProtectedInput){\n    getOrder(input: $input){\n      order {\n        id\n        uuid\n        plan\n        status\n        receiptId\n        pilotTransferId\n        pilotTransferResult\n        pilotDistance\n        pilotBounty\n        pilotAcceptedAt\n        createdAt\n        uploadedAt\n        completedAt\n        reviewedAt\n        history\n        rejectedBy\n        rejectedAt\n        distanceFromLocation\n        notes {\n          author {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n          body\n          visibility\n        }\n        listing {\n          id\n          beds\n          baths\n          price\n          sqft\n          type\n          mlsStatus\n          mlsNumber\n          description\n          features\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        agent {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        pilot {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        assets {\n          id\n          name\n          type\n          url\n          size\n          awsId\n          uploader {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n        }\n        contacts {\n          name\n          type\n          content\n          createdAt\n        }\n      }\n    }\n  }\n"],["\n  query getOrder($input: GetProtectedInput){\n    getOrder(input: $input){\n      order {\n        id\n        uuid\n        plan\n        status\n        receiptId\n        pilotTransferId\n        pilotTransferResult\n        pilotDistance\n        pilotBounty\n        pilotAcceptedAt\n        createdAt\n        uploadedAt\n        completedAt\n        reviewedAt\n        history\n        rejectedBy\n        rejectedAt\n        distanceFromLocation\n        notes {\n          author {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n          body\n          visibility\n        }\n        listing {\n          id\n          beds\n          baths\n          price\n          sqft\n          type\n          mlsStatus\n          mlsNumber\n          description\n          features\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        agent {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        pilot {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        assets {\n          id\n          name\n          type\n          url\n          size\n          awsId\n          uploader {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n        }\n        contacts {\n          name\n          type\n          content\n          createdAt\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},555:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(56)),r=g(a(57)),l=g(a(12)),i=g(a(15)),s=g(a(13)),d=g(a(14)),u=a(2),o=g(u),c=a(29),m=g(a(0)),f=a(261),p=g(a(492)),h=g(a(556));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={planName:e.plan.name,planPrice:e.actualPrice,checking:!1,latLng:[],discountErrors:[]},a.handleReturnedLocation=a.handleReturnedLocation.bind(a),a.validateDiscount=a.validateDiscount.bind(a),a.checkDiscountCode=a.checkDiscountCode.bind(a),a.fetchAssociatedMap=a.fetchAssociatedMap.bind(a),a}var a;return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"validateDiscount",value:function(e){return e.appliesTo&&"all"!==e.appliesTo&&this.state.planName!==e.appliesTo&&this.setState((function(e){return{discountErrors:e.discountErrors.concat("Discount does not apply.")}})),e.maxUsageCount&&e.usageCount>=e.maxUsageCount&&this.setState((function(e){return{discountErrors:e.discountErrors.concat("Discount eligibilty has ended.")}})),e.endAt&&e.startsAt&&(0,m.default)().isBetween(e.startsAt,e.endAt)&&this.setState((function(e){return{discountErrors:e.discountErrors.concat("Discount invalid.")}})),!(this.state.discountErrors.length>0)}},{key:"checkDiscountCode",value:function(e,t){var a=t.currentTarget.value;this.setState({checking:!0,discountErrors:[]},(0,r.default)(n.default.mark((function t(){var r,l,i;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.query({query:h.default,variables:{input:{code:a}}});case 2:r=t.sent,(l=r.data.applyDiscount).discount?this.validateDiscount(l.discount)&&(i=l.discount.amount.includes("%")?(0,f.calcPercentageDiscount)({base:this.state.planPrice,percent:l.discount.amount}):(0,f.calcNumberDiscount)({base:this.state.planPrice,number:l.discount.amount}),this.props.handleReturnedPayment({discountId:l.discount.id,discountedActualPrice:i,discountedPrice:i.slice(0,i.length-2)+"."+i.slice(i.length-2,i.length)})):this.props.handleReturnedPayment({discountedActualPrice:null,discountedPrice:null,discountId:null}),console.log("err",this.state.discountErrors),this.setState({checking:!1,discount:l.discount?l.discount:null});case 7:case"end":return t.stop()}}),t,this)}))))}},{key:"fetchAssociatedMap",value:(a=(0,r.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.latLng.length>0)){e.next=5;break}return t={center:{lat:this.state.latLng[0],lng:this.state.latLng[1]},zoom:20,mapTypeId:"satellite",scrollwheel:!1},e.next=4,new google.maps.Map(document.getElementById("mapArea"),t);case 4:e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleReturnedLocation",value:function(e){var t=e.address1,a=e.address2,n=e.city,r=e.state,l=e.zip,i=e.lat,s=e.lng;this.setState({latLng:[i,s]},(function(){this.fetchAssociatedMap(),this.props.handleReturnedLocation({address1:t,address2:a,city:n,state:r,zip:l,lat:i,lng:s})}))}},{key:"render",value:function(){var e=this;return o.default.createElement("div",null,o.default.createElement("div",null,o.default.createElement("div",{className:"text-sm font-bold"},"Address to film"),o.default.createElement(p.default,{handleReturnedLocation:this.handleReturnedLocation})),o.default.createElement("div",{className:"flex"},o.default.createElement("div",{className:"w-2/5 pt-4"},o.default.createElement("p",{className:"text-sm font-bold"},"Your order includes..."),o.default.createElement("ul",{className:"my-2"},this.props.plan.features.map((function(e,t){return o.default.createElement("li",{key:"feature_"+t,className:"my-3 flex"},o.default.createElement("span",{className:"block mr-3 pt-1"},o.default.createElement("i",{className:"far fa-check-circle fa-lg"})),o.default.createElement("span",{className:"block text-sm"},e.desc))})))),o.default.createElement("div",{className:"w-3/5 ml-4 pt-4"},o.default.createElement("div",{className:"signup-map-area rounded",id:"mapArea"}))),o.default.createElement("div",{className:"my-4 flex"},o.default.createElement("div",{className:"w-1/2"},o.default.createElement(c.ApolloConsumer,null,(function(t){return o.default.createElement("div",null,o.default.createElement("div",{className:"text-sm font-bold"},"Do you have a discount code?"),o.default.createElement("input",{type:"text",placeholder:"Discount code",name:"discountCode",onChange:function(a){return e.checkDiscountCode(t,a)},className:"input"}))}))),o.default.createElement("div",{className:"w-1/2 flex "},o.default.createElement("div",{className:"flex-1 flex items-end pl-4"},this.state.discountErrors.length>0?this.state.discountErrors.map((function(e,t){return o.default.createElement("p",{className:"text-sm text-red",key:"err_"+t},e)})):(this.state.discount?this.state.discount.amount:"")+" "+(this.state.discount?" off":"")),o.default.createElement("div",{className:"flex text-xl font-bold items-end"},o.default.createElement("span",{className:"inline-block mb-2 mr-1 text-sm"},"$"),this.props.price))),o.default.createElement("div",{className:"my-4"},o.default.createElement("div",{className:"text-sm font-bold"},"Payment"),o.default.createElement("div",{id:"card-element",className:"input"})))}}]),t}(u.Component);t.default=v},556:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query applyDiscount($input: ApplyDiscountInput){\n    applyDiscount(input: $input){\n      discount{\n        id\n        code\n        startsAt\n        endsAt\n        appliesTo\n        usageCount\n        maxUsageCount\n        amount\n      }\n    }\n  }\n"],["\n  query applyDiscount($input: ApplyDiscountInput){\n    applyDiscount(input: $input){\n      discount{\n        id\n        code\n        startsAt\n        endsAt\n        appliesTo\n        usageCount\n        maxUsageCount\n        amount\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},558:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(32)),r=C(a(56)),l=C(a(57)),i=C(a(12)),s=C(a(15)),d=C(a(13)),u=C(a(14)),o=a(2),c=C(o),m=a(29),f=a(259),p=a(6),h=(C(a(0)),C(a(524))),g=C(a(559)),v=C(a(915)),y=C(a(36)),b=C(a(917)),E=(C(a(649)),C(a(918))),N=C(a(919)),x=C(a(270)),_=C(a(920)),w=a(261),k=(C(a(579)),a(263));function C(e){return e&&e.__esModule?e:{default:e}}var I=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={editModeEnabled:!1,loading:!1,emailChanged:!1,nameChanged:!1,passwordChanged:!1,contactsChanged:!1,errors:[]},a.handleGQLErrors=a.handleGQLErrors.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a.handleNameChange=a.handleNameChange.bind(a),a.handleEmailChange=a.handleEmailChange.bind(a),a.handleDeactivationToggle=a.handleDeactivationToggle.bind(a),a.handlePasswordChange=a.handlePasswordChange.bind(a),a.handleReturnedContacts=a.handleReturnedContacts.bind(a),a.handleReturnedLocation=a.handleReturnedLocation.bind(a),a.toggleVerified=a.toggleVerified.bind(a),a.toggleEditMode=a.toggleEditMode.bind(a),a.buildInput=a.buildInput.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}var a;return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"getConnectionInfo",value:function(e){return"agent"===e.type?e.customerId?c.default.createElement("a",{href:"https://dashboard.stripe.com/customers/"+e.customerId,target:"_blank"},e.customerId):"Not connected yet":"pilot"===e.type?e.accountId?c.default.createElement("a",{href:"https://dashboard.stripe.com/applications/users/"+e.accountId,target:"_blank"},e.accountId):"Not connected yet":"admin"===e.type?"Not applicable":void 0}},{key:"toggleEditMode",value:function(){this.setState({editModeEnabled:!this.state.editModeEnabled})}},{key:"toggleVerified",value:function(){this.setState({loading:!this.state.loading},(0,l.default)(r.default.mark((function e(){var t,a,n=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.qGetUser.getUser.user,e.next=3,this.props.submitVerify(t.id,!t.isVerified).catch((function(e){n.setState((function(t){t.errors.concat(e)}))}));case 3:(a=e.sent)&&this.setState({loading:!this.state.loading,isVerified:a.data.verifyUser.user.isVerified});case 5:case"end":return e.stop()}}),e,this)}))))}},{key:"handleReturnedContacts",value:function(e,t){e&&this.setState({contacts:t})}},{key:"handleGQLErrors",value:function(e){console.log("ERR",e)}},{key:"handleReturnedLocation",value:function(e){this.setState({address1:e.address1,address2:e.address2,city:e.city,state:e.state,zip:e.zip,lat:e.lat,lng:e.lng,workRadius:e.workRadius})}},{key:"handleNameChange",value:function(e){this.setState({name:e.currentTarget.value,nameChanged:!0})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.currentTarget.value,emailChanged:!0})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.currentTarget.value,passwordChanged:!0},(function(){""===this.state.confirmPassword&&""===this.state.password&&this.setState({passwordChanged:!1})}))}},{key:"handleInputChange",value:function(e){this.setState((0,n.default)({},e.currentTarget.name,e.currentTarget.value))}},{key:"handleDeactivationToggle",value:(a=(0,l.default)(r.default.mark((function e(t,a,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,t({variables:{input:{id:a.id}},refetchQueries:[{query:b.default,variables:{input:{id:a.id,authorizedId:a.id,deactivatedReason:this.state.deactivatedReason}}}]});case 3:e.sent.data;case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"checkRequiredInfo",value:function(){return this.state.nameChanged&&!(0,k.isValidName)(this.state.name)&&this.setState((function(e){return{errors:e.errors.concat({type:"user",message:"Please verify you submited your location and workable area."})}})),this.state.emailChanged&&!(0,k.isValidEmail)(this.state.email)&&this.setState((function(e){return{errors:e.errors.concat({type:"user",message:"Please make sure all your user fields are valid."})}})),this.state.passwordChanged&&!(0,k.isValidPassword)(this.state.password)&&this.state.password===this.state.confirmPassword&&this.setState((function(e){return{errors:e.errors.concat({type:"user",message:"Please add at least one valid point of contact."})}})),0===this.state.errors.length}},{key:"buildInput",value:function(){var e=this,t={id:this.props.qGetUser.getUser.user.id,authorizedId:this.props.qGetUser.getUser.user.id,user:{address:{}}},a=this.state.contacts?this.state.contacts.map((function(e){return(0,f.pick)(["id","type","content","status","default"],e)})):null;return t.user.contacts=a,["name","email","password","bio","workRadius"].map((function(a){e.state[a]&&(t.user[a]=e.state[a])})),["address1","address2","city","state","zip","lat","lng"].map((function(a){e.state[a]&&(t.user.address[a]=e.state[a])})),t}},{key:"handleSubmit",value:function(){this.props.qGetUser.getUser.user;if(this.checkRequiredInfo()){var e=this.buildInput();this.setState({loading:!this.state.loading},(0,l.default)(r.default.mark((function t(){var a=this;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.props.submitUser(e).catch((function(e){a.handleGQLErrors(e)}))&&(this.toggleEditMode(),this.setState({loading:!this.state.loading}));case 2:case"end":return t.stop()}}),t,this)}))))}}},{key:"render",value:function(){var e=this,t=(0,y.default)(localStorage.getItem("hf_auth_header_token")),a=this.props.qGetUser,n=a.loading,r=a.getUser;if(n)return c.default.createElement("div",null);var l=r.user,i=parseInt(l.id),s=this.state.editModeEnabled;return c.default.createElement("div",{className:"flex flex-wrap md:-mx-4"},c.default.createElement("div",{className:"w-full md:w-1/4 p-4"},c.default.createElement(v.default,{user:l,editModeEnabled:this.state.editModeEnabled,currentUser:t})),c.default.createElement("div",{className:"w-full md:w-3/4 p-4"},c.default.createElement("div",{id:"profile",className:"bg-white rounded shadow p-4"},c.default.createElement("div",{className:"flex"},c.default.createElement("h3",{className:"font-bold flex-1"},t.id===i?"Settings":"Profile"),c.default.createElement("div",{onClick:this.toggleEditMode,className:"hover:cursor-pointer"},"edit"),"admin"===t.type&&"pilot"===l.type?c.default.createElement("div",{onClick:this.toggleVerified,className:(l.isVerified?" action-button button-red ":" action-button button-green")+" ml-4 w-24"},c.default.createElement("span",{className:" action-button-overlay"}),l.isVerified?"Unverify":"Verify"):null),"pilot"===l.type&&"admin"===t.type?c.default.createElement("div",{className:"border border-red-darker bg-red-lightest rounded mt-4 p-4"},c.default.createElement("h3",null,"Failed Missions"),c.default.createElement(m.Query,{query:E.default,variables:{input:{pilotId:l.id}}},(function(e){var t=e.loading,a=(e.error,e.data.getFailedMissions);return t?null:c.default.createElement("ul",null,a.failedMissions?a.failedMissions.map((function(e,t){return c.default.createElement("li",{key:"failed_"+t,className:" w-full py-2"},c.default.createElement("div",{className:"flex w-full"},c.default.createElement("div",{className:"text-sm"},(0,w.dateTimeShort)(e.createdAt)," - ","rejected"===e.typeOfFailure?"Filming rejected":"Mission Aborted"),c.default.createElement("div",{className:"text-right flex-1 text-sm"},c.default.createElement(p.Link,{to:"/admin/order/"+e.order.id},e.order.address.address1,", ",e.order.address.city))),e.reason?c.default.createElement("p",{className:"mt-1 text-sm"},e.reason):null,e.rejectedByUser?c.default.createElement("p",{className:"mt-1 text-sm"}," ",e.rejectedByUser.name):null)})):c.default.createElement("li",null,"none..."))})),c.default.createElement("div",{className:"mt-4"},c.default.createElement(m.Mutation,{mutation:_.default},(function(t){return c.default.createElement("div",{className:"mt-4 flex"},c.default.createElement("div",{className:"flex-1 mr-4"},l.deactivated?null:c.default.createElement("input",{onChange:e.handleInputChange,name:"deactivatedReason",className:"input flex-1",type:"text",placeholder:"Reason for deactivation (pilot will see this)",defaultValue:l.deactivatedReason})),c.default.createElement("div",{className:""},c.default.createElement("button",{className:" "+(l.deactivated?" action-button button-green":" action-button button-red"),onClick:function(a){return e.handleDeactivationToggle(t,l,a)}},c.default.createElement("span",{className:" action-button-overlay"}),l.deactivated?"Reactivate":"Deactivate")))})))):null,c.default.createElement("div",{className:"my-4 w-full"},c.default.createElement("div",{className:"text-xs"},"Name"),s?c.default.createElement("div",{className:""},c.default.createElement("input",{onChange:this.handleNameChange,name:"new_name",className:"input",type:"text",placeholder:"Name",defaultValue:l.name})):c.default.createElement("div",{className:"title"},l.name)),c.default.createElement("div",{className:"my-4 w-full"},c.default.createElement("div",{className:"text-xs"},"Email"),s?c.default.createElement("div",{className:"block"},c.default.createElement("input",{onChange:this.handleEmailChange,name:"new_email",className:"input",type:"text",placeholder:"Email",defaultValue:l.email})):c.default.createElement("div",{className:"title"},l.email)),t.id===i||"admin"===t.type?c.default.createElement("div",{className:"my-4 w-full"},c.default.createElement("div",{className:"text-xs"},"Api Connects"),c.default.createElement("div",{className:"rounded-lg border border-grey-light bg-grey-lighter p-4"},c.default.createElement("div",{className:"text-xs"},"agent"===l.type?"Stripe Customer ID":null,"pilot"===l.type?"Stripe Account ID":null,"admin"===l.type?"Stripe ID":null),c.default.createElement("div",{className:""},this.getConnectionInfo(l)))):null,c.default.createElement("div",{className:"my-4 w-full"},c.default.createElement("div",{className:"text-xs"},"Bio"),s?c.default.createElement("div",{className:"block"},c.default.createElement("textarea",{onChange:this.handleInputChange,name:"bio",className:"input",placeholder:"Tell us about yourself.",defaultValue:l.bio})):c.default.createElement("p",null,l.bio?l.bio:"No bio yet.")),s?c.default.createElement("div",{className:"flex my-4 w-full rounded-lg border border-yellow-light bg-yellow-lightest p-4"},c.default.createElement("div",{className:"flex-1 mr-4"},c.default.createElement("div",{className:"text-xs"},"Change password"),c.default.createElement("div",{className:"control"},c.default.createElement("input",{onChange:this.handlePasswordChange,name:"new_password",className:"input",type:"password",autoComplete:"off",placeholder:"Password"}))),c.default.createElement("div",{className:"flex-1"},c.default.createElement("div",{className:"text-xs"},"Confirm change password"),c.default.createElement("div",{className:"control"},c.default.createElement("input",{onChange:this.handleInputChange,name:"confirmPassword",className:"input",type:"password",placeholder:"Password Confirm"})))):null,c.default.createElement("div",{className:"my-6"},c.default.createElement("div",{className:"text-xs"},"Contacts"),c.default.createElement(h.default,{restrictedMode:"agent"===l.type,editMode:this.state.editModeEnabled,contacts:l.contacts,handleReturnedContacts:this.handleReturnedContacts})),"pilot"===l.type&&s?c.default.createElement("div",{className:"my-6"},c.default.createElement("div",{className:"text-xs"},"Pilot location"),c.default.createElement(g.default,{handleReturnedLocation:this.handleReturnedLocation})):null,!s||t.id!==i&&"admin"!==t.type?null:c.default.createElement("a",{className:" action-button button-green",onClick:this.handleSubmit},c.default.createElement("span",{className:" action-button-overlay"}),"Save Changes"))))}}]),t}(o.Component);t.default=(0,m.compose)((0,m.graphql)(b.default,{name:"qGetUser",options:function(e){return{variables:{input:{id:e.userid||(0,y.default)(localStorage.getItem("hf_auth_header_token")).id,authorizedId:(0,y.default)(localStorage.getItem("hf_auth_header_token")).id}}}}}),(0,m.graphql)(N.default,{props:function(e){e.ownProps;var t=e.mutate;return{submitVerify:function(e,a){return t({variables:{input:{id:e,authorizedId:e,user:{isVerified:a,refreshToken:!0}}},refetchQueries:[{query:b.default,variables:{input:{id:e,authorizedId:e}}}]})}}}}),(0,m.graphql)(x.default,{props:function(e){var t=e.ownProps,a=e.mutate;return{submitUser:function(e){return console.log("ownProps",t),a({variables:{input:e},refetchQueries:[{query:b.default,variables:{input:{id:t.userid||(0,y.default)(localStorage.getItem("hf_auth_header_token")).id,authorizedId:(0,y.default)(localStorage.getItem("hf_auth_header_token")).id}}}]})}}}}))(I)},559:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(12)),r=o(a(15)),l=o(a(13)),i=o(a(14)),s=a(2),d=o(s),u=o(a(492));function o(e){return e&&e.__esModule?e:{default:e}}var c=[10,20,30,40,50],m=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={radiusOpen:!1,isGeolocatable:!0,isFinding:!1},e.toggleRadiusOpen=e.toggleRadiusOpen.bind(e),e.handleRadiusChange=e.handleRadiusChange.bind(e),e.geolocateSuccess=e.geolocateSuccess.bind(e),e.geolocateError=e.geolocateError.bind(e),e.handleMapperLocation=e.handleMapperLocation.bind(e),e.showAddressMapper=e.showAddressMapper.bind(e),e.findLocation=e.findLocation.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){navigator.geolocation||this.setState({isGeolocatable:!1})}},{key:"handleMapperLocation",value:function(e){this.setState({lat:e.lat,lng:e.lng},(function(){this.props.handleReturnedLocation(this.state)}))}},{key:"showAddressMapper",value:function(){return d.default.createElement(u.default,{handleReturnedLocation:this.handleMapperLocation})}},{key:"showGeolocatorButton",value:function(){return d.default.createElement("a",{className:" action-button button-blue hover:cursor-pointer",onClick:this.findLocation},d.default.createElement("span",{className:"icon"},d.default.createElement("i",{className:"inline-block mr-3 fas fa-"+(this.state.lat?"check text-green-dark":"location-arrow")})),d.default.createElement("span",null,this.state.lat?"Got it, thanks":"Get Location Information"),d.default.createElement("span",{className:" action-button-overlay"}))}},{key:"handleRadiusChange",value:function(e){e&&this.setState({workRadius:e.currentTarget.getAttribute("radius"),properRadiusText:e.currentTarget.getAttribute("proper"),radiusOpen:!this.state.radiusOpen},(function(){this.props.handleReturnedLocation(this.state)}))}},{key:"toggleRadiusOpen",value:function(){this.setState({radiusOpen:!this.state.radiusOpen})}},{key:"geolocateSuccess",value:function(e){this.setState({isFinding:!1,lat:e.coords.latitude,lng:e.coords.longitude},(function(){this.props.handleReturnedLocation(this.state)}))}},{key:"geolocateError",value:function(){this.setState({isFinding:!1,isGeolocatable:!1})}},{key:"findLocation",value:function(){this.setState({isFinding:!0},(function(){try{navigator.geolocation.getCurrentPosition(this.geolocateSuccess,this.geolocateError)}catch(e){this.geolocateError}}))}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"relative rounded-lg border border-grey-light bg-grey-lighter p-4"},d.default.createElement("div",{id:"fetching-location-coords",className:"spinner "+(this.state.isFinding?"opacity-100":"")},d.default.createElement("i",{className:"fa fa-cog fa-spin fa-2x fa-fw","aria-hidden":"true"})),d.default.createElement("p",{className:"text-sm"},"In order to send you local homes to film we need to gather your location information and the radius of the area you would like to work."),d.default.createElement("div",{className:"flex mt-4"},d.default.createElement("div",{className:"mr-4"},d.default.createElement("div",{className:"dropdown relative "+(this.state.radiusOpen?"is-active":"")},d.default.createElement("div",{className:"dropdown-trigger hover:cursor-pointer",onClick:this.toggleRadiusOpen},d.default.createElement("button",{className:"select-faker","aria-haspopup":"true","aria-controls":"dropdown-menu"},d.default.createElement("span",null,this.state.properRadiusText?this.state.properRadiusText:"Work radius"),d.default.createElement("span",{className:"inline-block ml-6"},d.default.createElement("i",{className:"fa fa-angle-down","aria-hidden":"true"})))),d.default.createElement("div",{className:"dropdown-menu "+(this.state.radiusOpen?"block":"hidden"),id:"dropdown-menu",role:"menu"},d.default.createElement("div",{className:"p-2 flex flex-wrap bg-white border border-grey rounded"},c.map((function(t,a){return d.default.createElement("a",{radius:t,proper:t.toString()+" miles",onClick:e.handleRadiusChange,className:"w-full block px-2 py-1 hover:cursor-pointer",key:"radius_"+t.toString()},t.toString()+" miles")})))))),d.default.createElement("div",{className:"flex-1"},this.state.isGeolocatable?this.showGeolocatorButton():this.showAddressMapper())))}}]),t}(s.Component);t.default=m},562:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(12)),r=f(a(15)),l=f(a(13)),i=f(a(14)),s=a(2),d=f(s),u=(a(29),a(6)),o=a(259),c=(a(16),f(a(563))),m=f(a(262));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleAcceptClick=e.handleAcceptClick.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleAcceptClick",value:function(e){}},{key:"render",value:function(){var e=this.props.cssSizing||"w-full sm:w-1/2 md:w-1/3 lg:w-1/4",t=this.props.mission,a=(this.props.user.isVerified&&this.props.user.accountId,(0,o.find)((0,o.propEq)("name",t.plan))(m.default)),n=t.pilotDistance||Math.round(10*parseFloat(t.distanceFromLocation))/10,r=t.pilotBounty?t.pilotBounty:Math.round(parseInt(a?a.bounty:0)).toString();return d.default.createElement("div",{className:e+" px-4 pb-6"},d.default.createElement("div",{className:"bg-white rounded shadow px-4 py-4"},d.default.createElement(c.default,{bounty:r,distance:n}),d.default.createElement("div",{className:"py-8"},d.default.createElement("div",{className:"text-center font-medium"},t.address.address1),d.default.createElement("div",{className:"text-center text-sm"},t.address.city+", "+t.address.state+" "+t.address.zipCode)),d.default.createElement("div",{className:"flex-1 text-xs text-right"},d.default.createElement(u.Link,{className:"inline-block text-blue-darker border border-blue-darker py-1 px-6 rounded-full",to:"/missions/"+t.id+(t.agentId?"/"+t.agentId:"")},"View"))))}}]),t}(s.Component);t.default=p},563:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(2)),r=a(16),l=i(a(655));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.bounty,a=e.distance;return n.default.createElement("div",{className:"flex pb-4 border-grey"},n.default.createElement("div",{className:(0,r.css)(l.default.pilotInfoLeft)},n.default.createElement("div",{className:(0,r.css)(l.default.pilotInnerBlock)},n.default.createElement("div",{className:(0,r.css)(l.default.dollarWrapper)},n.default.createElement("div",{className:(0,r.css)(l.default.dollarIcon)},n.default.createElement("i",{className:"fas fa-dollar-sign"})),n.default.createElement("div",{className:(0,r.css)(l.default.numbers)},t)),n.default.createElement("div",{className:(0,r.css)(l.default.footerLeft)},"min. bounty"))),n.default.createElement("div",{className:(0,r.css)(l.default.pilotInfoRight)},n.default.createElement("div",{className:(0,r.css)(l.default.pilotInnerBlock)},n.default.createElement("div",{className:(0,r.css)(l.default.carWrapper)},n.default.createElement("div",{className:(0,r.css)(l.default.numbers)},a),n.default.createElement("div",{className:(0,r.css)(l.default.carIcon)},n.default.createElement("i",{className:"fas fa-car"}))),n.default.createElement("div",{className:(0,r.css)(l.default.footerRight)},"est. distance (mi.)"))))}},564:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query getMissions($input: GetListInput){\n    getMissions(input: $input){\n      id\n      agentId\n      status\n      createdAt\n      distanceFromLocation\n      plan\n      address{\n        address1\n        address2\n        city\n        state\n        zipCode\n        lat\n        lng\n      }\n    }\n  }\n"],["\n  query getMissions($input: GetListInput){\n    getMissions(input: $input){\n      id\n      agentId\n      status\n      createdAt\n      distanceFromLocation\n      plan\n      address{\n        address1\n        address2\n        city\n        state\n        zipCode\n        lat\n        lng\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},565:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=(a(23),n.StyleSheet.create({card:{background:"#f5f8fa"},header:{display:"flex",textTransform:"capitalize",borderBottom:"1px solid #e5e5e5",paddingBottom:"0.2rem",marginBottom:"0.6rem"},planTitle:{wordBreak:"normal",flex:"0",marginBottom:"0rem"},rightTitle:{flex:"1"},statusText:{textTransform:"capitalize"},smallUppercase:{textTransform:"uppercase",fontSize:"0.7rem"},smallUppercaseRight:{textTransform:"uppercase",fontSize:"0.7rem",textAlign:"right"},address:{margin:"0.4rem 0 0 0"},createdTitle:{textTransform:"uppercase",textAlign:"right",fontSize:"0.7rem"},rightText:{textAlign:"right"},cardFooter:{display:"flex",background:"#fff",borderTop:"1px solid #dbdbdb"},cardFooterItemLeft:{display:"block",flex:"4",padding:"0.75rem 1.5rem",borderRight:"1px solid #dbdbdb"},cardFooterItemRight:{padding:"0.75rem",display:"flex",flex:"2",justifyContent:"center",alignItems:"center"},removeLeftPadding:{paddingLeft:"0"},removeRightPadding:{paddingRight:"0"}}));t.default=r},566:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={statuses:[{name:"Recruiting",value:"recruiting"},{name:"Pending",value:"pending"},{name:"Filming",value:"filming"},{name:"Uploaded",value:"uploaded"},{name:"Initial processing",value:"initial_processing"},{name:"Awaiting review",value:"awaiting_review"},{name:"Final processing",value:"final_processing"},{name:"Rejected",value:"rejected"},{name:"Completed",value:"approved_completed"}]}},567:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(2),l=(n=r)&&n.__esModule?n:{default:n},i=a(261);t.default=function(e){var t=e.order;return l.default.createElement("div",{className:"flex"},l.default.createElement("div",{className:"flex-1"},l.default.createElement("div",{className:"text-xs"},"Transfer ID"),l.default.createElement("div",{className:"uppercase font-bold text-sm"},l.default.createElement("a",{href:"https://dashboard.stripe.com/applications/transfers/"+t.pilotTransferId,target:"_blank",className:""},t.pilotTransferId))),l.default.createElement("div",{className:"ml-4"},l.default.createElement("div",{className:"text-right"},l.default.createElement("div",{className:"text-xs"},"Transfer Sent"),l.default.createElement("div",{className:""},(0,i.dateTimeShort)(t.reviewedAt)))))}},568:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(2),l=(n=r)&&n.__esModule?n:{default:n},i=a(261);t.default=function(e){return l.default.createElement("div",{className:"border border-grey-darker p-2"},l.default.createElement("div",{className:"font-bold"},"Collected Contacts"),l.default.createElement("table",{className:"w-full"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{className:"w-1/3 text-left text-xs"},"Name"),l.default.createElement("th",{className:"w-1/3 text-left text-xs"},"Phone/Email"),l.default.createElement("th",{className:"w-1/3 text-left text-xs"},"Info requested at"))),l.default.createElement("tbody",null,e.contacts.map((function(e,t){return l.default.createElement("tr",{key:"contact_"+t,className:""},l.default.createElement("td",{className:""},e.name),l.default.createElement("td",{className:""},"email"===e.type?l.default.createElement("a",{href:"mailto:"+e.content},e.content):e.content),l.default.createElement("td",{className:""},(0,i.dateTimeShort)(e.createdAt)))})))))}},569:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(12)),r=g(a(15)),l=g(a(13)),i=g(a(14)),s=a(2),d=g(s),u=(a(29),a(6)),o=(a(259),a(690)),c=g(o),m=a(710),f=a(525),p=g(a(264)),h=a(261);g(a(36)),g(a(518)),g(a(578));function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,h.getEnv)(window.location.host),y=""+p.default.aws.baseUrl+v+"/orders/",b=p.default.base_url[v]+"/gallery",E=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={clipboardValue:"",copied:!1,url:"video"===e.asset.type?y+e.asset.assetableId+"/video_wm/"+e.asset.name:y+e.asset.assetableId+"/wm_thumb/"+e.asset.name,watermarked:!0},a.toggleWatermark=a.toggleWatermark.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"toggleWatermark",value:function(e){"image"===this.props.asset.type?this.state.watermarked?this.setState((function(e){return{url:e.url.replace(/wm_thumb/,"photo_thumb"),watermarked:!1}})):this.setState((function(e){return{url:e.url.replace(/photo_thumb/,"wm_thumb"),watermarked:!0}})):this.state.watermarked?this.setState((function(e){return{url:e.url.replace(/video_wm/,"video_og"),watermarked:!1}})):this.setState((function(e){return{url:e.url.replace(/video_og/,"video_wm"),watermarked:!0}}))}},{key:"render",value:function(){var e=this;this.state.watermarked;return d.default.createElement("div",{className:"p-4"},d.default.createElement("div",{className:"bg-white rounded shadow"},"video"===this.props.asset.type?d.default.createElement("div",{className:"flex flex-wrap pb-4"},d.default.createElement("div",{className:"w-3/4 px-4 mt-4"},d.default.createElement(f.Player,{src:this.state.url,className:"rounded-lg"}),d.default.createElement("div",{className:"flex mt-4"},d.default.createElement("div",{className:"mr-4 flex items-center"},"Gallery link"),d.default.createElement("div",{className:"flex-1"},d.default.createElement("input",{type:"text",className:"input",name:"link",value:window.location.origin+"/gallery/"+(this.props.uuid?this.props.uuid:""),readOnly:!0})))),d.default.createElement("div",{className:"w-1/4 px-4 md:pr-8 md:pl-4 mt-4"},d.default.createElement("div",{className:"font-bold mb-4"},"Your Listing Gallery"),d.default.createElement(u.Link,{className:"btn-asset-white bg-blue-lightest",to:"/gallery/"+(this.props.uuid?this.props.uuid:""),target:"_blank"},"View Gallery"),d.default.createElement(c.default,{appId:"1507022829407993"},d.default.createElement(o.Feed,{href:"http://www.facebook.com",name:"Hello",link:b+"/gallery/"+(this.props.uuid?this.props.uuid:"")},d.default.createElement("div",{className:"btn-asset-white"},d.default.createElement("i",{className:"fab fa-facebook text-facebook"})," Share Gallery"))),d.default.createElement("a",{className:"btn-asset-white",href:"https://twitter.com/intent/tweet?url="+b+"/gallery/"+(this.props.uuid?this.props.uuid:"")+"&hashtags=gravitist"},d.default.createElement("i",{className:"fab fa-twitter text-twitter"})," Tweet Gallery"),d.default.createElement(m.CopyToClipboard,{text:b+"/gallery/"+(this.props.uuid?this.props.uuid:""),onCopy:function(){return e.setState({copied:!0})}},d.default.createElement("div",{className:"btn-asset-white"},d.default.createElement("i",{className:"fas fa-link text-grey-light"})," Copy Gallery Link ",this.state.copied?d.default.createElement("i",{className:"fas fa-check text-grey-light"}):null)),d.default.createElement("div",{className:"font-bold mt-8 mb-4"},"Share video only"),d.default.createElement("div",{className:"btn-asset-white",onClick:this.toggleWatermark},"Toggle watermark"),d.default.createElement("div",{className:"flex -mx-2"},d.default.createElement("div",{className:"mx-2 flex-1"},d.default.createElement(c.default,{appId:"1507022829407993"},d.default.createElement(o.Feed,{href:"http://www.facebook.com",name:"Hello",link:b+"/order/"+this.props.asset.assetableId+"/asset/"+(this.state.watermarked?"wm":"og")+"/"+this.props.asset.name},d.default.createElement("div",{className:"btn-asset-white"},d.default.createElement("i",{className:"fab fa-facebook fa-2x text-facebook"}))))),d.default.createElement("div",{className:"mx-2 flex-1"},d.default.createElement("a",{className:"btn-asset-white",href:"https://twitter.com/intent/tweet?url="+b+"/order/"+this.props.asset.assetableId+"/asset/"+(this.state.watermarked?"wm":"og")+"/"+this.props.asset.name+"&hashtags=gravitist"},d.default.createElement("i",{className:"fab fa-twitter fa-2x text-twitter"}))),d.default.createElement("div",{className:"mx-2 flex-1"},d.default.createElement(m.CopyToClipboard,{text:b+"/order/"+this.props.asset.assetableId+"/asset/"+(this.state.watermarked?"wm":"og")+"/"+this.props.asset.name,onCopy:function(){return e.setState({copied:!0})}},d.default.createElement("div",{className:"btn-asset-white"},d.default.createElement("i",{className:"fas fa-link fa-2x text-grey-light"}),this.state.copied?d.default.createElement("i",{className:"fas fa-check text-grey-light"}):null)))))):d.default.createElement("div",null,d.default.createElement("div",{className:"hover",onClick:this.toggleWatermark},d.default.createElement("img",{src:this.state.url,alt:"photo"})),d.default.createElement("div",{className:"p-2"},d.default.createElement("div",{className:"flex"},d.default.createElement(c.default,{appId:"1507022829407993"},d.default.createElement(o.Feed,{href:"http://www.facebook.com",name:"Hello",link:b+"/order/"+this.props.asset.assetableId+"/asset/"+this.props.asset.name},d.default.createElement("div",{className:"ml-2 mr-4"},d.default.createElement("button",{type:"button"},d.default.createElement("i",{className:"fab fa-facebook fa-2x text-facebook"}))))),d.default.createElement("a",{className:"hover hover:text-twitter",href:"https://twitter.com/intent/tweet?url="+b+"/order/"+this.props.asset.assetableId+"/asset/"+this.props.asset.name+"&hashtags=gravitist"},d.default.createElement("i",{className:"fab fa-twitter fa-2x text-twitter"})),d.default.createElement("div",{className:"mx-4"},d.default.createElement(m.CopyToClipboard,{text:b+"/order/"+this.props.asset.assetableId+"/asset/"+(this.state.watermarked?"wm":"og")+"/"+this.props.asset.name,onCopy:function(){return e.setState({copied:!0})}},d.default.createElement("button",null,d.default.createElement("i",{className:"fas fa-link fa-2x text-grey-light"})))),d.default.createElement("div",{className:"self-end"},this.state.copied?"Copied.":null))))))}}]),t}(s.Component);t.default=E},578:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation toggleDefaultAsset($input: AssetInput) {\n    toggleDefaultAsset(input: $input){\n      asset{\n        id\n      }\n    }\n  }\n"],["\n  mutation toggleDefaultAsset($input: AssetInput) {\n    toggleDefaultAsset(input: $input){\n      asset{\n        id\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},579:function(e,t){e.exports="assets/3de2c72d054707991ab78568a11d8bb6.png"},646:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(2)),r=a(29),l=d(a(496)),i=d(a(895)),s=d(a(647));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return n.default.createElement(r.Query,{query:l.default,variables:{input:{options:{sortKey:"uploadedAt",sortValue:e.sortDirection||"DESC",sizeLimit:e.sizeLimit,colOffset:e.pageNumber&&e.sizeLimit?(e.pageNumber-1)*e.sizeLimit:null},criteria:e.criteria,queryString:e.queryString||""}}},(function(t){var a=t.loading,r=t.error,l=t.data.getOrders;if(a)return n.default.createElement("div",null);if(r)return"Error!: "+r;var d=l.orders,u=l.count,o=d.filter((function(e){return!0===e.needsAttention})),c=d.filter((function(e){return!1===e.needsAttention}));return n.default.createElement("div",null,o.length>0?n.default.createElement("div",{className:"px-4 border border-red-darker bg-red-lightest rounded mb-8"},n.default.createElement("div",{className:"font-bold text-xl my-2"},"Orders with Errors"),n.default.createElement("div",{className:"flex flex-wrap md:-mx-4"},o.map((function(t){return n.default.createElement(i.default,{cssSizing:e.cssSizing,order:t,key:"order_"+t.id})})))):null,n.default.createElement("div",{className:"flex flex-wrap mb-4 md:-mx-4"},c?c.map((function(t,a){return n.default.createElement(i.default,{cssSizing:e.cssSizing,order:t,key:"order_"+t.id})})):n.default.createElement("div",{className:"p-4"},"No Results")),e.showPagination&&e.sizeLimit&&e.pageNumber&&e.match&&u?n.default.createElement("div",{className:""},n.default.createElement(s.default,{match:e.match,pageSize:e.sizeLimit,recordCount:parseInt(u),pageNumber:e.pageNumber||1})):null)}))}},647:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(896)),r=c(a(12)),l=c(a(15)),i=c(a(13)),s=c(a(14)),d=a(2),u=c(d),o=a(6);function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentRoot:a.props.match.path.split("/:")[0]},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleInputChange",value:function(){}},{key:"render",value:function(){var e=this;console.log(this.state.currentRoot);var t=Math.ceil(this.props.recordCount/this.props.pageSize),a=this.props.pageNumber-1,r=a*this.props.pageSize+1,l=this.props.pageNumber*this.props.pageSize,i=this.props.recordCount>l?l:this.props.recordCount;return console.log(r),console.log(i),r>i?u.default.createElement(o.Redirect,{to:this.state.currentRoot+"/1"}):u.default.createElement("div",{className:"flex"},u.default.createElement("div",{className:"flex-1"},u.default.createElement("div",{className:"inline-block"},a>0?u.default.createElement("li",{className:"inline-block"},u.default.createElement(o.Link,{className:"inline-block border rounded py-1 px-3 mx-1",to:this.state.currentRoot+"/"+(parseInt(this.props.pageNumber)-1)},"Prev")):null,[].concat((0,n.default)(Array(t))).map((function(t,a){return u.default.createElement(o.Link,{className:"inline-block border rounded py-1 px-3 mx-1",key:"page_"+a,to:e.state.currentRoot+"/"+(a+1)},""+(a+1))})),this.props.pageNumber<t?u.default.createElement("li",{className:"inline-block"},u.default.createElement(o.Link,{className:"inline-block border rounded py-1 px-3 mx-1",to:this.state.currentRoot+"/"+(parseInt(this.props.pageNumber)+1)},"Next")):null)),u.default.createElement("div",{className:"text-right"},"Showing ",r," to ",i," of ",this.props.recordCount))}}]),t}(d.Component);t.default=m},648:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(12)),r=f(a(15)),l=f(a(13)),i=f(a(14)),s=a(2),d=f(s),u=(a(6),a(29)),o=f(a(649)),c=f(a(901)),m=f(a(647));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this;if((this.state.searchResults||this.props.userList).loading)return d.default.createElement("div",null);var t=this.props.userList.getUsers,a=t.users,n=t.count;return d.default.createElement("div",null,d.default.createElement("div",{className:"flex flex-wrap mb-4 md:-mx-4"},a.map((function(t,a){return d.default.createElement(c.default,{cssSizing:e.props.cssSizing,user:t,key:"user_"+t.id})}))),this.props.showPagination?d.default.createElement("div",{className:""},d.default.createElement(m.default,{match:this.props.match,pageSize:this.props.sizeLimit,recordCount:n,pageNumber:this.props.pageNumber})):null)}}]),t}(s.Component);t.default=(0,u.compose)((0,u.graphql)(o.default,{name:"userList",options:function(e){return{variables:{input:{options:{sortKey:e.sortBy||"createdAt",sortValue:e.sortDirection||"DESC",sizeLimit:e.sizeLimit,colOffset:(e.pageNumber-1)*e.sizeLimit},criteria:e.criteria,queryString:e.queryString||""}}}}}))(p)},649:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query($input: UserCollectionInput){\n    getUsers(input: $input){\n      count\n      users{\n        id\n        name\n        email\n        type\n        bio\n        workRadius\n        rejectedCount\n        abortCount\n        customerId\n        accountId\n        isVerified\n        termsAccepted\n        createdAt\n        updatedAt\n        contacts {\n          id\n          type\n          content\n          default\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        avatars {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n        licenses {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n        insurances {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n      }\n    }\n  }\n"],["\n  query($input: UserCollectionInput){\n    getUsers(input: $input){\n      count\n      users{\n        id\n        name\n        email\n        type\n        bio\n        workRadius\n        rejectedCount\n        abortCount\n        customerId\n        accountId\n        isVerified\n        termsAccepted\n        createdAt\n        updatedAt\n        contacts {\n          id\n          type\n          content\n          default\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        avatars {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n        licenses {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n        insurances {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},651:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query getDiscounts($input: DiscountCollectionInput){\n    getDiscounts(input: $input){\n      discounts {\n        id\n        code\n        startsAt\n        endsAt\n        appliesTo\n        usageCount\n        maxUsageCount\n        amount\n      }\n    }\n  }\n"],["\n  query getDiscounts($input: DiscountCollectionInput){\n    getDiscounts(input: $input){\n      discounts {\n        id\n        code\n        startsAt\n        endsAt\n        appliesTo\n        usageCount\n        maxUsageCount\n        amount\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},653:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(12)),r=v(a(15)),l=v(a(13)),i=v(a(14)),s=a(2),d=v(s),u=a(6),o=(a(29),v(a(265))),c=v(a(36)),m=v(a(264)),f=a(261),p=v(a(654)),h=v(a(657)),g=(v(a(658)),v(a(659)));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,f.getEnv)(window.location.host),b=m.default.stripe_platform[y],E=m.default.base_url[y],N=function(){return d.default.createElement("div",{className:"m-6"},"Loading...")},x=(0,o.default)({loader:function(){return new Promise((function(e){Promise.resolve().then(function(t){e(a(515))}.bind(null,a)).catch(a.oe)}))},loading:N}),_=(0,o.default)({loader:function(){return new Promise((function(e){Promise.resolve().then(function(t){e(a(558))}.bind(null,a)).catch(a.oe)}))},loading:N}),w=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e.renderNotifications=e.renderNotifications.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"renderNotifications",value:function(e){return d.default.createElement("div",{className:"flex flex-wrap md:-mx-4 "},e.accountId?null:d.default.createElement("div",{className:"flex-1 p-4"},d.default.createElement("div",{className:"border border-grey bg-red-lightest p-4"},d.default.createElement("h3",{className:"font-bold text-sm"},g.default.user.pilot.account.title),d.default.createElement("p",{className:"text-sm"},g.default.user.pilot.account.body),d.default.createElement("a",{href:"https://connect.stripe.com/express/oauth/authorize?redirect_uri="+E+"/auth/signup-pilot&client_id="+b+"&state="+e.id},d.default.createElement("img",{src:""+a(660),style:{display:"block",height:"30px",marginTop:"1rem"}})))),e.isVerified?null:d.default.createElement("div",{className:"flex-1 p-4"},d.default.createElement("div",{className:"border border-grey bg-yellow-lightest p-4"},d.default.createElement("h3",{className:"font-bold text-sm"},g.default.user.pilot.verified.title),d.default.createElement("p",{className:"text-sm"},g.default.user.pilot.verified.body))))}},{key:"render",value:function(){var e=(0,c.default)(localStorage.getItem("hf_auth_header_token"));return d.default.createElement("div",{className:"container mx-auto mt-8"},e.isVerified&&e.accountId?null:this.renderNotifications(e),d.default.createElement(u.Switch,null,d.default.createElement(u.Route,{path:"/history",render:function(e){e.match;return d.default.createElement(h.default,{view:"all",cssSizing:""})}}),d.default.createElement(u.Route,{path:"/missions/:missionId/:agentId?",render:function(e){var t=e.match;return d.default.createElement("div",{className:"columns"},d.default.createElement("div",{className:"column"},d.default.createElement(x,{orderid:t.params.missionId,authid:t.params.agentId?t.params.agentId:null})))}}),d.default.createElement(u.Route,{path:"/settings",render:function(e){e.match;return d.default.createElement(_,null)}}),d.default.createElement(u.Route,{render:function(t){t.match;return d.default.createElement("div",{className:"flex flex-wrap -mx-6"},d.default.createElement("div",{className:"w-1/4 px-6 pb-4"},d.default.createElement("div",{className:"font-bold text-xl my-2"},"Current Missions"),d.default.createElement(h.default,{view:"current",cssSizing:"w-full"})),d.default.createElement("div",{className:"w-3/4 px-6 pb-4"},d.default.createElement("div",{className:"font-bold text-xl my-2"},"Open Missions"),e.deactivated?d.default.createElement("div",null,d.default.createElement("p",{className:""},"Your account has been deactived because... "),d.default.createElement("p",null,e.deactivatedReason),d.default.createElement("p",null,"to contest this or if you believe this was an error please ",d.default.createElement("a",{href:"mailto:contest@homefilming.com"},"contact us"),".")):d.default.createElement(p.default,{cssSizing:"w-1/3"})))}})))}}]),t}(s.Component);t.default=w},654:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(12)),r=f(a(15)),l=f(a(13)),i=f(a(14)),s=a(2),d=f(s),u=a(29),o=(a(16),a(259),f(a(36))),c=f(a(562)),m=(f(a(656)),f(a(564)));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=(0,o.default)(localStorage.getItem("hf_auth_header_token")),a=this.props.data,n=a.loading,r=a.getMissions;if(n)return d.default.createElement("div",null);var l=r;return d.default.createElement("div",{className:"flex flex-wrap mb-6 md:-mx-4"},l.map((function(a,n){return d.default.createElement(c.default,{key:"mission_"+n,mission:a,user:t,cssSizing:e.props.cssSizing})})))}}]),t}(s.Component);t.default=(0,u.graphql)(m.default,{options:function(e){return{variables:{input:{sortKey:"distanceFromLocation",sortValue:"ASC",sizeLimit:20}}}}})(p)},655:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=(a(23),n.StyleSheet.create({pilotInfoLeft:{width:"calc(45% - 1px)",display:"flex",justifyContent:"center",borderRight:"1px solid #b8c2cc"},pilotInfoRight:{width:"55%",display:"flex",justifyContent:"center"},pilotInnerBlock:{display:"inline-block"},dollarWrapper:{position:"relative",paddingLeft:"0.9rem"},carWrapper:{textAlign:"right",position:"relative",paddingRight:"1rem"},dollarIcon:{fontSize:"1.25rem",position:"absolute",top:"0",left:"0",width:"1rem",height:"1.5rem",color:"#1f9d55"},carIcon:{fontSize:"1.25rem",position:"absolute",top:"0",right:"0",width:"1rem",height:"1.2rem",color:"#2779bd"},numbers:{fontSize:"2.75rem",fontFamily:'"Droid serif", Times, serif',fontWeight:"bold",lineHeight:"2.5rem"},footerLeft:{fontSize:"0.75rem",textAlign:"right"},footerRight:{fontSize:"0.75rem"}}));t.default=r},656:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(12)),r=o(a(15)),l=o(a(13)),i=o(a(14)),s=a(2),d=o(s),u=a(6);a(29);function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderOrder=e.renderOrder.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"renderOrder",value:function(){return 0===this.props.orders.length?d.default.createElement("div",{className:"panel-block"},"You do not have any "+this.props.itemName+"s."):this.props.orders.map((function(e,t){return d.default.createElement(u.NavLink,{key:"order_"+t,className:"panel-block is-active",to:"/dashboard/"+e.id},d.default.createElement("span",{className:"panel-icon"},d.default.createElement("i",{className:"fa fa-map-o","aria-hidden":"true"})),e.address.address1)}))}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement("nav",{className:"panel"},d.default.createElement("p",{className:"panel-heading"},this.props.title),this.renderOrder()))}}]),t}(s.Component);t.default=c},657:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(12)),r=f(a(15)),l=f(a(13)),i=f(a(14)),s=a(2),d=f(s),u=a(29),o=(a(259),f(a(36))),c=f(a(562)),m=f(a(496));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=(0,o.default)(localStorage.getItem("hf_auth_header_token")),a=this.props.data,n=a.loading,r=a.getOrders;if(n)return d.default.createElement("div",null);var l=r.orders,i=r.orders.filter((function(e){return"filming"===e.status})),s=r.orders.filter((function(e){return"filming"!==e.status}));return d.default.createElement("div",{className:"flex flex-wrap mb-6 md:-mx-4"},"all"===this.props.view?l.map((function(a,n){return d.default.createElement(c.default,{key:"mission_"+n,mission:a,user:t,cssSizing:e.props.cssSizing})})):"current"===this.props.view?i.map((function(a,n){return d.default.createElement(c.default,{key:"mission_"+n,mission:a,user:t,cssSizing:e.props.cssSizing})})):d.default.createElement("div",null,s.map((function(a,n){return d.default.createElement(c.default,{key:"mission_"+n,mission:a,user:t,cssSizing:e.props.cssSizing})}))))}}]),t}(s.Component);t.default=(0,u.graphql)(m.default,{options:function(e){return{variables:{input:{options:{sortKey:"createdAt",sortValue:"ASC",sizeLimit:20},criteria:e.criteria,queryString:e.queryString||""}}}}})(p)},658:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: UpdateUserInput){\n    updateUser(input: $input){\n      user{\n        termsAccepted\n      }\n      auth{\n        token\n      }\n    }\n  }\n"],["\n  mutation($input: UpdateUserInput){\n    updateUser(input: $input){\n      user{\n        termsAccepted\n      }\n      auth{\n        token\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},659:function(e){e.exports=JSON.parse('{"user":{"pilot":{"account":{"title":"Account payout setup","body":"We do not have a Stripe ID on file for you yet, if you went through the stripe process during signup and got redirected back to Homefilming, you probably just need to refresh this page. If you skipped this step and have not signuped up yet use the link below to register now to get paid."},"verified":{"title":"Document verification","body":"We have not had a chance to review the piloting documents you uploaded. Please allow us a hour or two in order to review it and activate your account."},"terms":{"title":"Terms of piloting","body":"By accepting any missions you are agreeing to our terms of use, and commiting to perform the requested task within 24 hours."}}}}')},660:function(e,t){e.exports="assets/e95f2d63f97cc7d021f289f55d7880e6.png"},661:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(12)),r=g(a(15)),l=g(a(13)),i=g(a(14)),s=a(2),d=g(s),u=a(6),o=a(29),c=g(a(265)),m=(g(a(36)),g(a(662))),f=(g(a(680)),g(a(271))),p=g(a(891)),h=(a(259),g(a(496)));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(){return d.default.createElement("div",{className:"m-6"},"Loading...")},y=(0,c.default)({loader:function(){return new Promise((function(e){Promise.resolve().then(function(t){e(a(515))}.bind(null,a)).catch(a.oe)}))},loading:v}),b=(0,c.default)({loader:function(){return new Promise((function(e){Promise.resolve().then(function(t){e(a(558))}.bind(null,a)).catch(a.oe)}))},loading:v}),E=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.orders,a=(t.list,t.loading),n=t.error;return a?d.default.createElement("div",{className:"m-6"},"Loading..."):n?(console.log(n),d.default.createElement("p",null,"Error!")):d.default.createElement("div",{className:"container mx-auto mt-8"},d.default.createElement(u.Switch,null,d.default.createElement(u.Route,{path:"/orders/:orderId",render:function(e){var t=e.match;return d.default.createElement(y,{orderid:t.params.orderId})}}),d.default.createElement(u.Route,{path:"/re-order/:plan",render:function(t){var a=t.match;return d.default.createElement(p.default,{match:a,history:e.props.history})}}),d.default.createElement(u.Route,{path:"/new-order",render:function(e){e.match;return d.default.createElement(f.default,null)}}),d.default.createElement(u.Route,{path:"/settings",render:function(e){e.match;return d.default.createElement(b,null)}}),d.default.createElement(u.Route,{render:function(e){e.match;return d.default.createElement("div",{className:"flex flex-wrap -mx-6"},d.default.createElement("div",{className:"w-full lg:w-1/2 px-6 pb-4"},d.default.createElement("div",{className:"font-bold text-xl my-2"},"Recent orders"),d.default.createElement(m.default,{cssSizing:"w-full lg:w-1/2",sortBy:"uploadedAt",sizeLimit:10,criteria:{status:"recruiting,filming,initial_processing,final_processing,awaiting_review"}})),d.default.createElement("div",{className:"w-full lg:w-1/2 px-6 pb-4"},d.default.createElement("div",{className:"font-bold text-xl my-2"},"Order history"),d.default.createElement(m.default,{cssSizing:"w-full lg:w-1/2",sortBy:"uploadedAt",sizeLimit:10,criteria:{status:"approved_completed"}})))}})))}}]),t}(s.Component);t.default=(0,o.graphql)(h.default,{options:function(e){return{variables:{input:{options:{sortKey:"createdAt",sortValue:"DESC",sizeLimit:5},criteria:{},queryString:""}}}},props:function(e){var t=e.data,a=t.loading;return{orders:{error:t.error,loading:a,list:t.getOrders}}}})(E)},662:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(12)),r=m(a(15)),l=m(a(13)),i=m(a(14)),s=a(2),d=m(s),u=a(29),o=m(a(496)),c=m(a(663));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.loading,n=t.getOrders;if(a)return d.default.createElement("div",null);var r=n.orders;return d.default.createElement("div",{className:"flex flex-wrap mb-6 md:-mx-4"},r?r.map((function(t,a){return d.default.createElement(c.default,{cssSizing:e.props.cssSizing,order:t,key:"order_"+t.id})})):"No Results")}}]),t}(s.Component);t.default=(0,u.graphql)(o.default,{options:function(e){return{variables:{input:{options:{sortKey:e.sortBy||"createdAt",sortValue:e.sortDirection||"DESC",sizeLimit:e.sizeLimit||50},criteria:e.criteria,queryString:e.queryString||""}}}}})(f)},663:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(12)),r=c(a(15)),l=c(a(13)),i=c(a(14)),s=a(2),d=c(s),u=a(6),o=(a(29),a(16),c(a(497)),a(261));c(a(565));function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.cssSizing||"w-full sm:w-1/2 md:w-1/3 lg:w-1/4",t=this.props.order;return d.default.createElement("div",{className:e+" px-4 pb-6"},d.default.createElement("div",{className:"bg-white rounded shadow"},d.default.createElement("div",{className:"bg-blue-lightest rounded-t border-b border-grey p-4"},d.default.createElement("div",{className:"flex"},d.default.createElement("div",{className:"mr-4"},d.default.createElement("i",{className:"fas fa-home fa-3x"})),d.default.createElement("div",{className:""},d.default.createElement("div",{className:"font-bold text-2xl"},"approved_completed"==t.status?"Delivered":"Coming Soon"),d.default.createElement("p",{className:""},(0,o.humanize)(t.status))))),d.default.createElement("div",{className:"p-4"},d.default.createElement("div",{className:""},d.default.createElement("div",{className:"text-center font-medium"},t.address.address1),d.default.createElement("div",{className:"text-center text-sm"},t.address.city+", "+t.address.state+" "+t.address.zipCode)),d.default.createElement("div",{className:"py-4"},d.default.createElement("div",{className:"text-xs text-center"},"Last updated"),d.default.createElement("p",{className:"text-center text-sm"},(0,o.dateTimeShort)(t.updatedAt))),d.default.createElement("div",{className:"text-center text-xs py-4"},d.default.createElement("a",{href:"https://dashboard.stripe.com/payments/"+t.receiptId,target:"_blank"},t.receiptId)),d.default.createElement("div",{className:"flex leading-normal"},d.default.createElement("div",{className:" flex-1 text-xs text-right"},d.default.createElement(u.Link,{className:"inline-block text-blue-darker border border-blue-darker py-1 px-6 rounded-full",to:"/orders/"+t.id},"View"))))))}}]),t}(s.Component);t.default=m},664:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=(a(23),n.StyleSheet.create({image:{display:"block",position:"relative",overflow:"hidden"},large:{width:"72px",height:"72px",borderRadius:"36px"},medium:{width:"48px",height:"48px",borderRadius:"24px"},small:{width:"24px",height:"24px",borderRadius:"12px"},imgTag:{width:"100%",height:"auto",display:"block"},imglarge:{borderRadius:"36px"},imgmedium:{borderRadius:"24px"},imgsmall:{borderRadius:"12px"}}));t.default=r},665:function(e,t,a){var n={"./1.png":666,"./10.png":667,"./11.png":668,"./12.png":669,"./2.png":670,"./3.png":671,"./4.png":672,"./5.png":673,"./6.png":674,"./7.png":675,"./8.png":676,"./9.png":677,"./a1.png":678,"./a2.png":679};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=665},666:function(e,t){e.exports="assets/20487eacdbb8a03d0d42a6b7a2a45cec.png"},667:function(e,t){e.exports="assets/f6cec00005e9b13ff4f3a2f2c9296e3d.png"},668:function(e,t){e.exports="assets/f1fa41106a62485f2ccf18fd64ef3484.png"},669:function(e,t){e.exports="assets/ae2b4c0ee04554b01f925e67679b7990.png"},670:function(e,t){e.exports="assets/032e8c66c5b0251465e52d353fb961dd.png"},671:function(e,t){e.exports="assets/c6d571505788c28f0b7bc6ac19a2932d.png"},672:function(e,t){e.exports="assets/9a1b112feed85cc356b0371c6e77a678.png"},673:function(e,t){e.exports="assets/ea6c8e71af6bf2c825578da4d56d225d.png"},674:function(e,t){e.exports="assets/53c5ef072d6c830c247d4e011d8a3fa5.png"},675:function(e,t){e.exports="assets/effc81ef5b5da124fdf1b87c72353d50.png"},676:function(e,t){e.exports="assets/360fc8300aa9d247e9e635b7a1fddc63.png"},677:function(e,t){e.exports="assets/114833890c7c4af235a79b46d706aabe.png"},678:function(e,t){e.exports="assets/04722a87e56238683783f7ded8b24255.png"},679:function(e,t){e.exports="assets/5bf53797cfde53cb5ff195988fee3f89.png"},680:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(12)),r=f(a(15)),l=f(a(13)),i=f(a(14)),s=a(2),d=f(s),u=(a(16),a(6),a(29)),o=f(a(515)),c=f(a(890)),m=f(a(496));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleInputChange",value:function(){}},{key:"render",value:function(){var e=this.props.overview,t=e.loading,a=(e.error,e.history);if(t)return d.default.createElement("div",{className:"m-6"},"Loading...");var n=this.props.orderid?this.props.orderid:a.orders[0].id;return d.default.createElement("div",{className:"columns"},d.default.createElement("div",{className:"w-1/4"},d.default.createElement(o.default,{orderid:n})),d.default.createElement("div",{className:"column is-one-fifth"},d.default.createElement(c.default,{selected:n,orders:a.orders})))}}]),t}(s.Component);t.default=(0,u.compose)((0,u.graphql)(m.default,{options:function(e){return{variables:{input:{options:{sortKey:"createdAt",sortValue:"DESC",sizeLimit:10},criteria:{},queryString:""}}}}}))(p)},681:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(32)),r=y(a(12)),l=y(a(15)),i=y(a(13)),s=y(a(14)),d=a(2),u=y(d),o=a(29),c=a(259),m=y(a(682)),f=y(a(36)),p=y(a(684)),h=a(261),g=y(a(685)),v=y(a(686));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={beds:e.listing?e.listing.beds:null,baths:e.listing?e.listing.baths:null,sqft:e.listing?e.listing.sqft:null,price:e.listing?e.listing.price:null,mlsNumber:e.listing?e.listing.mlsNumber:null,description:e.listing?e.listing.description:null,type:e.listing?e.listing.type:null,mlsStatus:e.listing?e.listing.mlsStatus:null,features:e.listing?e.listing.features:[],updated:!1},a.newFeature=a.newFeature.bind(a),a.updateFeature=a.updateFeature.bind(a),a.removeFeature=a.removeFeature.bind(a),a.submitListing=a.submitListing.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"handleInputChange",value:function(e){this.setState((0,n.default)({},e.currentTarget.name,"price"===e.currentTarget.name?(0,h.cleansePrice)(e.currentTarget.value):e.currentTarget.value))}},{key:"checkFeaturesValidated",value:function(){}},{key:"newFeature",value:function(){var e=this,t={id:"new-"+Math.floor(999999*Math.random()),label:"",value:""};this.setState((function(a){return{features:e.state.features.concat(t)}}))}},{key:"updateFeature",value:function(e){this.setState((function(t){return{features:(0,c.update)(e.idx,e,t.features)}}))}},{key:"removeFeature",value:function(e){this.setState((function(t){return{features:(0,c.remove)(e,1,t.features)}}))}},{key:"submitListing",value:function(){var e=this;if(this.props.listing)this.props.updateListing({id:this.props.listing.id,authorizedId:(0,f.default)(localStorage.getItem("hf_auth_header_token")).id,listing:(0,c.omit)(["updated"],this.state)}).then((function(t){return e.setState({updated:!0})}));else{var t=(0,c.omit)(["updated"],this.state);this.props.createListing({listing:(0,c.merge)(t,{orderId:this.props.order.id})}).then((function(t){return e.setState({updated:!0})}))}}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:"listing",className:"bg-white rounded shadow p-4"},u.default.createElement("h3",{className:"font-bold"},"Listing details"),u.default.createElement("p",{className:"text-sm py-2"},"These added details will be displayed on your gallery page."),u.default.createElement("div",{className:"flex -mx-2 my-4"},u.default.createElement("div",{className:"px-2 w-1/4"},u.default.createElement("div",{className:"text-xs"},"Beds"),u.default.createElement("input",{type:"number",step:"1",min:"0",className:"input",placeholder:"Beds",name:"beds",defaultValue:this.state.beds,onChange:this.handleInputChange})),u.default.createElement("div",{className:"px-2 w-1/4"},u.default.createElement("div",{className:"text-xs"},"Baths"),u.default.createElement("input",{type:"number",step:"0.5",min:"0",className:"input",placeholder:"Baths",name:"baths",defaultValue:this.state.baths,onChange:this.handleInputChange})),u.default.createElement("div",{className:"px-2 flex-1"},u.default.createElement("div",{className:"text-xs"},"Sqft"),u.default.createElement("input",{type:"number",step:"1",min:"0",className:"input",placeholder:"Sqft",name:"sqft",defaultValue:this.state.sqft,onChange:this.handleInputChange}))),u.default.createElement("div",{className:"flex -mx-2 my-4"},u.default.createElement("div",{className:"mx-2 flex-1"},u.default.createElement("div",{className:"text-xs"},"Price"),u.default.createElement("input",{type:"text",step:"1",min:"0",className:"input",placeholder:"Price",name:"price",defaultValue:this.state.price,onChange:this.handleInputChange})),u.default.createElement("div",{className:"mx-2 flex-1"},u.default.createElement("div",{className:"text-xs"},"MLS Number"),u.default.createElement("input",{type:"text",className:"input",placeholder:"MLS Number",name:"mlsNumber",defaultValue:this.state.mlsNumber,onChange:this.handleInputChange}))),u.default.createElement("div",{className:"flex -mx-2 my-4"},u.default.createElement("div",{className:"mx-2 flex-1"},u.default.createElement("div",{className:"text-xs"},"Property type"),u.default.createElement("div",{className:"inline-block relative w-full"},u.default.createElement("select",{className:"",onChange:this.handleInputChange,defaultValue:this.state.type,name:"type"},u.default.createElement("option",null,"Property Type"),p.default.propertyTypes.map((function(e,t){return u.default.createElement("option",{key:"prop_"+t,value:e.value},e.name)}))),u.default.createElement("div",{className:"pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker"},u.default.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u.default.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))),u.default.createElement("div",{className:"mx-2 flex-1"},u.default.createElement("div",{className:"text-xs"},"MLS Status"),u.default.createElement("div",{className:"inline-block relative"},u.default.createElement("select",{onChange:this.handleInputChange,name:"mlsStatus",defaultValue:this.state.mlsStatus},u.default.createElement("option",null,"MLS Status"),p.default.mlsStatuses.map((function(e,t){return u.default.createElement("option",{key:"status_"+t,value:e.value},e.name)}))),u.default.createElement("div",{className:"pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker"},u.default.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u.default.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))))),u.default.createElement("div",{className:"w-full my-4"},u.default.createElement("div",{className:"text-xs"},"Description"),u.default.createElement("textarea",{className:"input",name:"description",defaultValue:this.state.description,placeholder:"Description of listing",onChange:this.handleInputChange})),u.default.createElement("div",{className:"w-full my-4"},u.default.createElement("div",{className:"text-sm font-bold"},"Features"),u.default.createElement("ul",{id:"featuresList"},this.state.features.map((function(t,a){return u.default.createElement("li",{key:"feat_"+a},u.default.createElement(m.default,{idx:a,removeFeature:e.removeFeature,updateFeature:e.updateFeature,feature:t}))})))),u.default.createElement("div",{className:"flex"},u.default.createElement("div",{className:"flex-1"},u.default.createElement("a",{className:"",onClick:this.newFeature},"Add feature")),u.default.createElement("div",{className:"inline-block text-right"},u.default.createElement("button",{className:" action-button button-green",onClick:this.submitListing},this.state.updated?"Saved.":"Save listing info",u.default.createElement("span",{className:" action-button-overlay"})))))}}]),t}(d.Component);t.default=(0,o.compose)((0,o.graphql)(g.default,{props:function(e){e.ownProps;var t=e.mutate;return{createListing:function(e){return t({variables:{input:e}})}}}}),(0,o.graphql)(v.default,{props:function(e){e.ownProps;var t=e.mutate;return{updateListing:function(e){return t({variables:{input:e}})}}}}))(b)},682:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(32)),r=o(a(12)),l=o(a(15)),i=o(a(13)),s=o(a(14)),d=a(2),u=o(d);a(16),a(259),o(a(683));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){(0,r.default)(this,t);var e=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleInputChange=e.handleInputChange.bind(e),e.handleRemoveClick=e.handleRemoveClick.bind(e),e}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleInputChange",value:function(e){this.setState((0,n.default)({},e.currentTarget.name,e.currentTarget.value),(function(){this.props.updateFeature({idx:this.props.idx,label:this.state.label,value:this.state.value})}))}},{key:"handleRemoveClick",value:function(){this.props.removeFeature(this.props.idx)}},{key:"render",value:function(){return u.default.createElement("div",{className:"w-full flex mb-3"},u.default.createElement("div",{className:"mr-4"},u.default.createElement("input",{type:"text",className:"input",placeholder:"Ex. Garages",name:"label",onChange:this.handleInputChange,defaultValue:this.props.feature.label})),u.default.createElement("div",{className:"mr-4"},u.default.createElement("input",{type:"text",className:"input",placeholder:"3 car",name:"value",onChange:this.handleInputChange,defaultValue:this.props.feature.value})),u.default.createElement("div",{className:"list-button"},u.default.createElement("a",{className:"",onClick:this.handleRemoveClick},u.default.createElement("i",{className:"fa fa-times"}))))}}]),t}(d.Component);t.default=c},683:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=(a(23),n.StyleSheet.create({featuresList:{marginTop:"2rem"}}));t.default=r},684:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={propertyTypes:[{value:"house",name:"House"},{value:"apartment",name:"Apartment"},{value:"condo",name:"Condo/Co-op"},{value:"townhome",name:"Townhomes"},{value:"manufacuted",name:"Manufactured"},{value:"lot",name:"Lot/Land"}],mlsStatuses:[{value:"active",name:"Active",definition:"This status means that the listing is available and unencumbered\n        by any contract. The days on market count continues during this period."},{value:"contingentWithKickout",name:"Contingent with kickout",definition:"This status means that the listing has an accepted contract but it\n        is contingent upon the buyer getting a contract and closing on their current\n        home. Additionally, with kickout means that a buyer who can purchase without\n        selling a home could make an offer on the home as a backup offer.  If the\n        seller likes the second offer better, he could give notice to his first\n        buyer that the first buyer must firm up and waive the contingency or be\n        kicked out of the contract so that the seller can move forward with\n        contract number 2.  The days on market count continues during this period."},{value:"contingentNoKickout",name:"Contingent no Kickout",definition:"This means that the listing has an accepted contract but the seller\n      did not require that there be a kickout period on the contract. A prospective\n      buyer that might want to write a contract on this property in this status must\n      understand that they can write an offer and if accepted by the seller, it will\n      remain in backup status. The seller cannot kick his first buyer out. The only\n      way contract number 2 can become a primary contract is if the first contract\n      falls apart on its own accord (building inspection, financing, etc.) The days\n      on market count continues during this period."},{value:"contingentShortSale",name:"Contingent short sale",definition:"This means that the listing has an accepted contract but the accepted\n        contract must have lender approval. The home is being sold at a price that will\n        require the lender(s) to accept less than what is owed on the home. A prospective\n        buyer must understand that he may or may not have a chance to put in a second contract\n        offer that may or may not be considered. This is a very tricky situation and\n        requires a professional real estate agent with experience in short sales to help them\n        navigate this type of transaction. The days on market count continues during this period."},{value:"option",name:"Option",definition:"This means that the listing has an accepted contract. The option period\n        is the time period during which inspections are being performed and according to the\n        St. Louis Association of Realtors board contract, it is the time period during which\n        a buyer can terminate a contract after purchasing a building inspection. Once a building\n        inspection notice (or request for repairs to be made) is submitted to the seller, the\n        option period is terminated. The length of the option period is dictated in the contract.\n        The default time period for option status is 10 days but can be changed to a different time\n        period with agreement from both parties. The days on market count continues during this period."},{value:"temporarilyOffMarket",name:"Temporarily off market",definition:"This status is to be used on a short term basis for a home listing that needs to\n        out of the MLS briefly. This could be due to a need for a repair or because the seller has\n        some improvements that are needed based on feedback from showing agents. The home will not\n        be shown during this period. Days on market count is suspended during this period. It resumes\n        when the home listing is activated again."},{value:"pending",name:"Pending",definition:"This status means that the home is under contract and the buyer can no longer\n        walk out of the contract on the building inspection results. While pending, a home will\n        no longer be shown. Days on market count is suspended during this period.  If the listing\n        is reactivated if the contract falls apart, all of the days on market to date are picked up\n        and applied to the listing."},{value:"sold",name:"Sold",definition:"This status means that a closing has occurred and the property is no longer\n        available for sale.  Days on market count is terminated."},{value:"withdrawn",name:"Withdrawn",definition:"This status means that the listing agent has removed the listing from the\n        MLS but still has a valid listing agreement with the seller. The house may or may not\n        be able to be shown. The listing agent would need to be consulted on a case by case\n        basis under this status. Days on market count is suspended during this period."},{value:"cancelled",name:"Cancelled",definition:"This status means that the listing agreement between listing broker and seller\n        has been terminated. The home is no longer for sale. The days on market count is terminated\n        with this status."}]}},685:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: CreateListingInput) {\n    createListing(input: $input){\n      listing{\n        id\n        beds\n        baths\n        price\n        sqft\n        type\n        mlsNumber\n        mlsStatus\n        description\n        features\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"],["\n  mutation($input: CreateListingInput) {\n    createListing(input: $input){\n      listing{\n        id\n        beds\n        baths\n        price\n        sqft\n        type\n        mlsNumber\n        mlsStatus\n        description\n        features\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},686:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: UpdateListingInput) {\n    updateListing(input: $input){\n      listing{\n        id\n        beds\n        baths\n        price\n        sqft\n        type\n        mlsNumber\n        mlsStatus\n        description\n        features\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"],["\n  mutation($input: UpdateListingInput) {\n    updateListing(input: $input){\n      listing{\n        id\n        beds\n        baths\n        price\n        sqft\n        type\n        mlsNumber\n        mlsStatus\n        description\n        features\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},687:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a(56)),r=w(a(57)),l=w(a(32)),i=w(a(12)),s=w(a(15)),d=w(a(13)),u=w(a(14)),o=a(2),c=w(o),m=a(29),f=a(6),p=(a(259),a(261)),h=w(a(688)),g=w(a(36)),v=w(a(262)),y=w(a(566)),b=(w(a(492)),w(a(567))),E=w(a(568)),N=(w(a(569)),w(a(715)),w(a(529))),x=w(a(531)),_=w(a(721));w(a(579));function w(e){return e&&e.__esModule?e:{default:e}}var k=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={status:e.order.status},a.updateOrder=a.updateOrder.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a}return(0,u.default)(t,e),(0,s.default)(t,[{key:"handleInputChange",value:function(e){this.setState((0,l.default)({},e.currentTarget.name,e.currentTarget.value),(0,r.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateOrder();case 2:t=e.sent,console.log("resolved",this.state),console.log("resolved",t);case 5:case"end":return e.stop()}}),e,this)}))))}},{key:"updateOrder",value:function(){return this.props.updateOrder({id:this.props.order.id,authorizedId:(0,g.default)(localStorage.getItem("hf_auth_header_token")).id,order:{status:this.state.status}}).then((function(e){return e}))}},{key:"render",value:function(){var e=this,t=this.props.order,a=v.default.filter((function(t){return t.name===e.props.order.plan}))[0];return c.default.createElement("div",null,c.default.createElement("div",{className:"flex pb-4"},c.default.createElement("div",{className:"flex justify-end items-end"},c.default.createElement("i",{className:"fas fa-chevron-left"}),c.default.createElement(f.Link,{to:"/admin/orders",className:"inline-block pl-2",style:{lineHeight:"1.1rem"}},"Back to orders")),c.default.createElement("div",{className:"flex-1 text-right text-xl font-bold"},a.title," - ",this.props.order.uuid)),c.default.createElement("div",{className:"bg-white rounded shadow p-6"},c.default.createElement("div",{id:"order_"+t.id,className:"w-full"},c.default.createElement("div",{className:"w-full flex"},c.default.createElement("div",{className:"flex-1 pt-4"},c.default.createElement("p",{className:"text-xl font-bold"},t.address.address1," ",t.address.address2?", "+t.address.address2:null),c.default.createElement("p",{className:"text-sm"},t.address.city,t.address.state?", "+t.address.state:null," ",t.address.zipCode)),c.default.createElement("div",{className:"ml-4"},c.default.createElement("label",{className:"block text-right text-sm"},"Status"),c.default.createElement("div",{className:"inline-block relative"},c.default.createElement("select",{value:t.status,onChange:this.handleInputChange,name:"status"},y.default.statuses.map((function(e,t){return c.default.createElement("option",{key:"status_"+t,value:e.value},e.name)}))),c.default.createElement("div",{className:"pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker"},c.default.createElement("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},c.default.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))))),"approved_completed"===t.status?c.default.createElement("div",null,c.default.createElement("div",{className:"my-6"},c.default.createElement(b.default,{order:t})),c.default.createElement("div",{className:"my-8"},c.default.createElement(E.default,{contacts:t.contacts}))):null,c.default.createElement("div",{className:"my-8"},c.default.createElement("div",{className:"rounded-lg border border-grey-light bg-grey-lighter p-4"},c.default.createElement(N.default,{modelId:t.id,model:"order",title:"Add a note about this filming",placeholderText:"Special Instructions. ie. Gate codes, Area to film from"}))),c.default.createElement("div",{className:"flex my-8"},c.default.createElement("div",{className:"flex-1"},c.default.createElement(h.default,{user:t.agent,link:!0})),c.default.createElement("div",{className:"flex-1"},t.pilot?c.default.createElement(h.default,{user:t.pilot,align:"right",link:!0}):null)),c.default.createElement("div",{className:"flex"},c.default.createElement("div",{className:"flex-1 mr-4"},c.default.createElement("div",{className:"text-sm"},"Receipt ID"),c.default.createElement("div",{className:""},c.default.createElement("a",{href:"https://dashboard.stripe.com/payments/"+t.receiptId,target:"_blank",className:""},t.receiptId))),c.default.createElement("div",{className:""},c.default.createElement("div",{className:"text-right text-sm"},"Created"),c.default.createElement("div",{className:""},(0,p.dateShort)(t.createdAt)))))))}}]),t}(o.Component);t.default=(0,m.graphql)(_.default,{props:function(e){var t=e.ownProps,a=e.mutate;return{updateOrder:function(e){return a({variables:{input:e},refetchQueries:[{query:x.default,variables:{input:{id:t.order.id,authorizedId:t.order.pilot.id}}}]})}}}})(k)},688:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(2)),r=a(6),l=(a(16),i(a(497)));i(a(83)),i(a(689));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return n.default.createElement("div",null,"right"===e.align?n.default.createElement("div",{className:"flex"},n.default.createElement("div",{className:"flex-1"},n.default.createElement("div",{className:"text-right"},e.link?n.default.createElement(r.Link,{to:"/admin/profile/"+e.user.id},e.user.name):e.user.name),n.default.createElement("div",{className:"text-xs uppercase text-right"},e.user.type)),n.default.createElement("div",{className:"ml-4"},n.default.createElement(l.default,{src:e.user.avatar?e.user.avatar.url:null,size:"medium"}))):n.default.createElement("div",{className:"flex"},n.default.createElement("div",{className:"mr-4"},n.default.createElement(l.default,{src:e.user.avatar?e.user.avatar.url:null,size:"medium"})),n.default.createElement("div",{className:"flex-1"},n.default.createElement("div",{className:""},e.link?n.default.createElement(r.Link,{to:"/admin/profile/"+e.user.id},e.user.name):e.user.name),n.default.createElement("div",{className:"text-xs uppercase"},e.user.type))))}},689:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=(a(23),n.StyleSheet.create({rightText:{textAlign:"right"},smallUppercase:{textTransform:"uppercase",fontSize:"0.7rem"},smallUppercaseRight:{textTransform:"uppercase",fontSize:"0.7rem",textAlign:"right"},removeLeftPadding:{paddingLeft:"0"},removeRightPadding:{paddingRight:"0"}}));t.default=r},715:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(32)),r=c(a(12)),l=c(a(15)),i=c(a(13)),s=c(a(14)),d=a(2),u=c(d),o=(a(16),c(a(716)));function c(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={address1:e.address.address1,address2:e.address.address2,city:e.address.city,state:e.address.state,zipCode:e.address.zipCode,lat:e.address.lat,lng:e.address.lng},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"handleInputChange",value:function(e){this.setState((0,n.default)({},e.currentTarget.name,e.currentTarget.value),(function(){console.log("address state",this.state),this.props.returnAddress(this.state)}))}},{key:"render",value:function(){var e=this.props.address;return u.default.createElement("div",null,u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control has-icons-left has-icons-right"},u.default.createElement("input",{className:"input is-medium",type:"text",placeholder:"Address",name:"address1",onChange:this.handleInputChange,defaultValue:e.address1}),u.default.createElement("span",{className:"icon is-small is-left"},u.default.createElement("i",{className:"fa fa-home"})),u.default.createElement("span",{className:"icon is-small is-right"},u.default.createElement("i",{className:"fas fa-check"})))),u.default.createElement("div",{className:"columns"},u.default.createElement("div",{className:"column is-half"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control"},u.default.createElement("input",{className:"input",type:"text",placeholder:"City",name:"city",onChange:this.handleInputChange,defaultValue:e.city})))),u.default.createElement("div",{className:"column"},u.default.createElement("div",{className:"field"},u.default.createElement("p",{className:"control"},u.default.createElement("span",{className:"select is-fullwidth"},u.default.createElement("select",{onChange:this.handleInputChange,name:"state",defaultValue:this.state.state},u.default.createElement("option",null,"State"),o.default.map((function(e,t){return u.default.createElement("option",{value:e.abbreviation,key:e.abbreviation+"_"+t},e.abbreviation)}))))))),u.default.createElement("div",{className:"column"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control"},u.default.createElement("input",{className:"input",type:"text",placeholder:"Zip code",name:"zipCode",onChange:this.handleInputChange,defaultValue:e.zipCode}))))))}}]),t}(d.Component);t.default=m},716:function(e){e.exports=JSON.parse('[{"name":"Alabama","abbreviation":"AL"},{"name":"Alaska","abbreviation":"AK"},{"name":"American Samoa","abbreviation":"AS"},{"name":"Arizona","abbreviation":"AZ"},{"name":"Arkansas","abbreviation":"AR"},{"name":"California","abbreviation":"CA"},{"name":"Colorado","abbreviation":"CO"},{"name":"Connecticut","abbreviation":"CT"},{"name":"Delaware","abbreviation":"DE"},{"name":"District Of Columbia","abbreviation":"DC"},{"name":"Federated States Of Micronesia","abbreviation":"FM"},{"name":"Florida","abbreviation":"FL"},{"name":"Georgia","abbreviation":"GA"},{"name":"Guam","abbreviation":"GU"},{"name":"Hawaii","abbreviation":"HI"},{"name":"Idaho","abbreviation":"ID"},{"name":"Illinois","abbreviation":"IL"},{"name":"Indiana","abbreviation":"IN"},{"name":"Iowa","abbreviation":"IA"},{"name":"Kansas","abbreviation":"KS"},{"name":"Kentucky","abbreviation":"KY"},{"name":"Louisiana","abbreviation":"LA"},{"name":"Maine","abbreviation":"ME"},{"name":"Marshall Islands","abbreviation":"MH"},{"name":"Maryland","abbreviation":"MD"},{"name":"Massachusetts","abbreviation":"MA"},{"name":"Michigan","abbreviation":"MI"},{"name":"Minnesota","abbreviation":"MN"},{"name":"Mississippi","abbreviation":"MS"},{"name":"Missouri","abbreviation":"MO"},{"name":"Montana","abbreviation":"MT"},{"name":"Nebraska","abbreviation":"NE"},{"name":"Nevada","abbreviation":"NV"},{"name":"New Hampshire","abbreviation":"NH"},{"name":"New Jersey","abbreviation":"NJ"},{"name":"New Mexico","abbreviation":"NM"},{"name":"New York","abbreviation":"NY"},{"name":"North Carolina","abbreviation":"NC"},{"name":"North Dakota","abbreviation":"ND"},{"name":"Northern Mariana Islands","abbreviation":"MP"},{"name":"Ohio","abbreviation":"OH"},{"name":"Oklahoma","abbreviation":"OK"},{"name":"Oregon","abbreviation":"OR"},{"name":"Palau","abbreviation":"PW"},{"name":"Pennsylvania","abbreviation":"PA"},{"name":"Puerto Rico","abbreviation":"PR"},{"name":"Rhode Island","abbreviation":"RI"},{"name":"South Carolina","abbreviation":"SC"},{"name":"South Dakota","abbreviation":"SD"},{"name":"Tennessee","abbreviation":"TN"},{"name":"Texas","abbreviation":"TX"},{"name":"Utah","abbreviation":"UT"},{"name":"Vermont","abbreviation":"VT"},{"name":"Virgin Islands","abbreviation":"VI"},{"name":"Virginia","abbreviation":"VA"},{"name":"Washington","abbreviation":"WA"},{"name":"West Virginia","abbreviation":"WV"},{"name":"Wisconsin","abbreviation":"WI"},{"name":"Wyoming","abbreviation":"WY"}]')},717:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(56)),r=v(a(57)),l=v(a(12)),i=v(a(15)),s=v(a(13)),d=v(a(14)),u=a(2),o=v(u),c=(a(16),a(29)),m=(a(259),v(a(36))),f=v(a(497)),p=v(a(0)),h=v(a(530)),g=v(a(718));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){(0,l.default)(this,t);var e=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleRemoveNote=e.handleRemoveNote.bind(e),e}var a;return(0,d.default)(t,e),(0,i.default)(t,[{key:"handleRemoveNote",value:(a=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.destroyNote({id:this.props.note.id,authorizedId:this.props.note.author.id});case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=(0,m.default)(localStorage.getItem("hf_auth_header_token"));return o.default.createElement("article",{className:"bg-white rounded shadow p-4 flex my-4"},o.default.createElement("figure",{className:"mr-4"},o.default.createElement(f.default,{size:"medium",src:this.props.note.author.avatar?this.props.note.author.avatar.url:null})),o.default.createElement("div",{className:"flex-1"},o.default.createElement("div",{className:""},o.default.createElement("p",null,o.default.createElement("strong",null,this.props.note.author.name),o.default.createElement("small",null,"  ",(0,p.default)(Date.parse(this.props.note.createdAt)).format("MMM Do YYYY, h:mma")),o.default.createElement("br",null),this.props.note.body))),this.props.note.author.id==e.id?o.default.createElement("div",{className:""},o.default.createElement("button",{className:"text-grey",onClick:this.handleRemoveNote},o.default.createElement("i",{className:"far fa-times-circle"}))):null)}}]),t}(u.Component);t.default=(0,c.graphql)(g.default,{props:function(e){var t=e.ownProps,a=e.mutate;return{destroyNote:function(e){return a({variables:{input:e},refetchQueries:[{query:h.default,variables:{input:{model:t.model,modelId:t.modelId}}}]})}}}})(y)},718:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation destroyNote($input: DestroyNoteInput) {\n    destroyNote(input: $input){\n      note{\n        id\n      }\n    }\n  }\n"],["\n  mutation destroyNote($input: DestroyNoteInput) {\n    destroyNote(input: $input){\n      note{\n        id\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},719:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(56)),r=h(a(57)),l=h(a(12)),i=h(a(15)),s=h(a(13)),d=h(a(14)),u=a(2),o=h(u),c=a(29),m=(a(259),h(a(36))),f=(h(a(497)),h(a(530))),p=h(a(720));function h(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={body:""},a.handleInputChange=a.handleInputChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}var a;return(0,d.default)(t,e),(0,i.default)(t,[{key:"handleInputChange",value:function(e){this.setState({body:e.currentTarget.value})}},{key:"handleSubmit",value:(a=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.body.length>2)){e.next=5;break}return e.next=3,this.props.submitNote({model:this.props.model,modelId:this.props.modelId,note:{body:this.state.body}});case 3:e.sent,this.setState({body:""});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){(0,m.default)(localStorage.getItem("hf_auth_header_token"));return o.default.createElement("div",{className:""},o.default.createElement("div",{className:""},o.default.createElement("textarea",{className:"input",onChange:this.handleInputChange,value:this.state.body,placeholder:this.props.placeholderText?this.props.placeholderText:"Add a note."})),o.default.createElement("div",{className:"mt-2 flex justify-end"},o.default.createElement("div",{className:"inline-block"},o.default.createElement("button",{className:" action-button button-green",onClick:this.handleSubmit},o.default.createElement("span",{className:" action-button-overlay"}),"Add Note"))))}}]),t}(u.Component);t.default=(0,c.graphql)(p.default,{props:function(e){e.ownProps;var t=e.mutate;return{submitNote:function(e){return t({variables:{input:e},refetchQueries:[{query:f.default,variables:{input:{model:e.model,modelId:e.modelId}}}]})}}}})(g)},720:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: CreateNoteInput) {\n    createNote(input: $input){\n      note {\n        id\n        author{\n          id\n          type\n          name\n          email\n        }\n        body\n        visibility\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"],["\n  mutation($input: CreateNoteInput) {\n    createNote(input: $input){\n      note {\n        id\n        author{\n          id\n          type\n          name\n          email\n        }\n        body\n        visibility\n        createdAt\n        updatedAt\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},721:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: UpdateOrderInput) {\n    updateOrder(input: $input){\n      order{\n        id\n        plan\n        status\n        receiptId\n        pilotTransferId\n        pilotTransferResult\n        pilotDistance\n        pilotBounty\n        createdAt\n        uploadedAt\n        completedAt\n        reviewedAt\n        history\n        rejectedBy\n        rejectedAt\n        distanceFromLocation\n        notes {\n          author {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n          body\n          visibility\n        }\n        listing {\n          id\n          beds\n          baths\n          price\n          sqft\n          type\n          mlsStatus\n          description\n          features\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        agent {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        pilot {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        assets {\n          id\n          name\n          type\n          url\n          size\n          awsId\n          uploader {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n        }\n      }\n    }\n  }\n"],["\n  mutation($input: UpdateOrderInput) {\n    updateOrder(input: $input){\n      order{\n        id\n        plan\n        status\n        receiptId\n        pilotTransferId\n        pilotTransferResult\n        pilotDistance\n        pilotBounty\n        createdAt\n        uploadedAt\n        completedAt\n        reviewedAt\n        history\n        rejectedBy\n        rejectedAt\n        distanceFromLocation\n        notes {\n          author {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n          body\n          visibility\n        }\n        listing {\n          id\n          beds\n          baths\n          price\n          sqft\n          type\n          mlsStatus\n          description\n          features\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        agent {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        pilot {\n          id\n          avatar {\n            id\n            url\n          }\n          type\n          name\n          email\n        }\n        assets {\n          id\n          name\n          type\n          url\n          size\n          awsId\n          uploader {\n            id\n            avatar {\n              id\n              url\n            }\n            type\n            name\n            email\n          }\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},722:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(12)),r=h(a(15)),l=h(a(13)),i=h(a(14)),s=a(2),d=h(s),u=a(6),o=a(259),c=a(261),m=h(a(529)),f=h(a(568)),p=(h(a(723)),h(a(262)));function h(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleInputChange",value:function(){}},{key:"render",value:function(){var e=this.props.order,t=(0,o.find)((0,o.propEq)("name",e.plan))(p.default);return d.default.createElement("div",null,d.default.createElement("div",{className:"flex pb-4"},d.default.createElement("div",{className:"flex justify-end items-end"},d.default.createElement("i",{className:"fas fa-chevron-left"}),d.default.createElement(u.Link,{to:"/orders",className:"inline-block pl-2",style:{lineHeight:"1.1rem"}},"Back to orders")),d.default.createElement("div",{className:"flex-1 text-right text-xl font-bold"},t?t.title:null," - ",e.uuid)),d.default.createElement("div",{className:"bg-white rounded shadow p-6"},d.default.createElement("div",{id:"order_"+e.id,className:"w-full"},d.default.createElement("div",{className:"w-full flex"},d.default.createElement("div",{className:"flex-1 pt-4"},d.default.createElement("p",{className:"text-xl font-bold"},e.address.address1," ",e.address.address2?", "+e.address.address2:null),d.default.createElement("p",{className:"text-sm"},e.address.city,e.address.state?", "+e.address.state:null," ",e.address.zipCode)),d.default.createElement("div",{className:"ml-4"},d.default.createElement("label",{className:"block text-right text-sm"},"Status"),d.default.createElement("div",{className:"inline-block relative"},(0,c.humanize)(e.status))))),d.default.createElement("div",{className:"mt-8"},"approved_completed"!==e.status?d.default.createElement("div",{className:"flex justify-center"},d.default.createElement("div",{className:"flex"},d.default.createElement("div",{className:"mr-4"},d.default.createElement("i",{className:"fas fa-home fa-3x"})),d.default.createElement("div",{className:""},d.default.createElement("div",{className:"font-bold text-2xl"},"approved_completed"==e.status?"Delivered":"Coming Soon"),d.default.createElement("p",{className:""},(0,c.humanize)(e.status))))):d.default.createElement("div",{className:"my-8"},d.default.createElement(f.default,{contacts:e.contacts})),d.default.createElement("div",{className:"w-full lg:w-3/5 m-auto mt-4 text-center"},"recruiting"===e.status?d.default.createElement("p",null,"Thank you very much for your order, we got the wheels in motion and have started recruiting a pilot. Please take a moment and fill out the listing info."):"filming"===e.status?d.default.createElement("p",null,"Thank you very much for your order, we recruited a pilot and are awaiting a uploaded video. Please take a moment and fill out the listing info."):"approved_completed"===e.status?d.default.createElement("p",{className:"mb-8"},"You order has been processed and delivered. check out the your results below."):d.default.createElement("p",null,"Thank you very much for your order. We are processing, and branding your video... please be patient."))),"approved_completed"!==e.status?d.default.createElement("div",{className:"my-8"},d.default.createElement("div",{className:"rounded-lg border border-grey-light bg-grey-lighter p-4"},d.default.createElement(m.default,{modelId:e.id,model:"order",title:"Add a note about this filming",placeholderText:"Special Instructions. ie. Gate codes, Area to film from"}))):null,d.default.createElement("div",{className:"flex"},d.default.createElement("div",{className:"flex-1 mr-4"},d.default.createElement("div",{className:"text-sm"},"Receipt ID"),d.default.createElement("div",{className:""},e.receiptId)),d.default.createElement("div",{className:""},d.default.createElement("div",{className:"text-right text-sm"},"Created"),d.default.createElement("div",{className:""},(0,c.dateShort)(e.createdAt))))))}}]),t}(s.Component);t.default=g},723:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=a(23),l=n.StyleSheet.create({addressHeader:{alignSelf:"center"},addressOneTwoHeader:{fontSize:"1.6rem",lineHeight:"1.4rem",marginTop:"0.4rem",fontFamily:'"Droid serif", Times, serif',fontWeight:"600"},dateHeader:{fontSize:"1.6rem",lineHeight:"1.6rem",fontFamily:'"Droid serif", Times, serif',fontWeight:"600"},statusText:{fontSize:"2rem",lineHeight:"1.8rem",fontFamily:'"Droid serif", Times, serif',fontWeight:"600"},blueArea:{padding:"0.6rem 1rem",border:"1px solid "+r.c.bFgBlue,borderRadius:r.b.radius,background:r.c.bBgBlue,color:r.c.bTextBlue},greenArea:{padding:"0.6rem 1rem",border:"1px solid "+r.c.bFgGreen,borderRadius:r.b.radius},receiptIcon:{marginLeft:"0.8rem",height:"40px",display:"flex",alignItems:"flex-end",justifyContent:"flex-end"},receiptIdLink:{textDecoration:"none"},receiptIconInner:{height:"26px",width:"120px"},receiptInfo:{flex:"1"},smallTitle:{fontSize:"0.8rem"},bigText:{fontSize:"1.2rem",lineHeight:"1.4rem",fontWeight:"600"},videoPreview:{display:"flex",alignItems:"center",justifyContent:"center",margin:"2rem 0rem",height:"16rem",border:"1px solid "+r.c.bFgGrey,borderRadius:r.b.radius,background:r.c.bBgGrey,color:r.c.bTextGrey},pageTitle:{paddingBottom:"0.6rem"},filmIcon:{transform:"rotate(-15deg)"},pilotValue:{marginRight:"0.6rem",display:"inline-block",fontSize:"2rem",lineHeight:"1rem",fontFamily:'"Droid serif", Times, serif',fontWeight:"bold"},pilotText:{display:"inline-block",fontSize:"0.8rem",lineHeight:"1rem"},detailSection:{margin:"1.5rem 0"}});t.default=l},724:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(56)),r=S(a(57)),l=S(a(12)),i=S(a(15)),s=S(a(13)),d=S(a(14)),u=a(2),o=S(u),c=(a(16),a(29)),m=a(6),f=a(259),p=a(261),h=S(a(36)),g=S(a(529)),v=S(a(563)),y=S(a(567)),b=S(a(499)),E=a(525),N=S(a(566)),x=S(a(531)),_=S(a(564)),w=S(a(496)),k=S(a(880)),C=S(a(881)),I=S(a(882)),O=S(a(262));function S(e){return e&&e.__esModule?e:{default:e}}var A=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={hideIrrelevant:!1,showUploadSuccess:!1},a.returnUploadInstance=a.returnUploadInstance.bind(a),a.handleAcceptMission=a.handleAcceptMission.bind(a),a.handleBailMission=a.handleBailMission.bind(a),a.returnRefetchQueries=a.returnRefetchQueries.bind(a),a}var a,u;return(0,d.default)(t,e),(0,i.default)(t,[{key:"returnUploadInstance",value:function(e){var t=e.hideIrrelevant,a=e.showUploadSuccess,l=e.keyUrl;this.setState({hideIrrelevant:t,showUploadSuccess:a},(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return e.next=3,this.props.uploadedVideo({id:this.props.order.id,status:"uploaded",uploadedAt:new Date,rawUrl:l});case 3:this.props.updateCallback();case 4:case"end":return e.stop()}}),e,this)}))))}},{key:"returnRefetchQueries",value:function(){return[{query:x.default,variables:{input:{id:this.props.order.id,authorizedId:this.props.order.agent.id}}},{query:w.default,variables:{input:{options:{sortKey:"createdAt",sortValue:"ASC",sizeLimit:20},criteria:{status:"filming"},queryString:""}}},{query:_.default,variables:{input:{sortKey:"distanceFromLocation",sortValue:"ASC",sizeLimit:20}}}]}},{key:"handleAcceptMission",value:(u=(0,r.default)(n.default.mark((function e(t,a,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:{input:{id:a.id,status:"filming",pilotDistance:this.props.distance,pilotBounty:this.props.bounty}},refetchQueries:this.returnRefetchQueries()});case 2:e.sent.data;case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return u.apply(this,arguments)})},{key:"handleBailMission",value:(a=(0,r.default)(n.default.mark((function e(t,a,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:{input:{id:a.id,authorizedId:a.agentId}},refetchQueries:this.returnRefetchQueries()});case 2:e.sent.data;case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.order,a=((0,f.find)((0,f.propEq)("name",t.plan))(O.default),(0,h.default)(localStorage.getItem("hf_auth_header_token"))),n=t&&t.pilot&&parseInt(t.pilot.id)===a.id,r=N.default.statuses.filter((function(e){return e.value===t.status}))[0],l=t.pilotBounty?t.pilotBounty:this.props.bounty,i=t.pilotDistance?t.pilotDistance:this.props.distance;this.props.duration;return o.default.createElement("div",null,o.default.createElement("div",{className:"flex pb-4"},o.default.createElement("div",{className:"flex justify-end items-end"},o.default.createElement("i",{className:"fas fa-chevron-left"}),o.default.createElement(m.Link,{to:"/dashboard",className:"inline-block pl-2",style:{lineHeight:"1.1rem"}},"Back to dashboard")),o.default.createElement("div",{className:"flex-1 text-right text-xl font-bold"},"Mission - ",t.uuid)),o.default.createElement("div",{className:"bg-white rounded shadow p-6"},o.default.createElement("div",{id:"order_"+t.id,className:"w-full"},o.default.createElement("div",{className:"w-full flex"},o.default.createElement("div",{className:"flex-1 pt-4"},o.default.createElement("p",{className:"text-xl font-bold"},t.address.address1," ",t.address.address2?", "+t.address.address2:null),o.default.createElement("p",{className:"text-sm"},t.address.city,t.address.state?", "+t.address.state:null," ",t.address.zipCode)),o.default.createElement("div",{className:"w-64 -mr-4"},o.default.createElement(v.default,{bounty:l,distance:i})))),n?o.default.createElement("div",null,o.default.createElement("div",{className:"w-full flex"},o.default.createElement("div",{className:"flex-1"},o.default.createElement("label",{className:"block text-xs"},"Accepted"),o.default.createElement("div",{className:""},o.default.createElement("div",{className:""},(0,p.dateTimeShort)(t.pilotAcceptedAt)))),o.default.createElement("div",{className:"flex-1 text-right"},o.default.createElement("label",{className:"block text-xs"},"Status"),o.default.createElement("div",{className:"font-bold"},r.name))),"filming"===t.status?o.default.createElement("div",null,o.default.createElement("div",{className:"my-8 rounded-lg border border-grey-light bg-grey-lighter p-4"},o.default.createElement(g.default,{modelId:t.id,model:"order",title:"Add a note about this filming",placeholderText:"Special Instructions. ie. Gate codes, Area to film from"})),this.state.hideIrrelevant?null:o.default.createElement("div",{className:""},o.default.createElement("div",{className:"font-bold text-sm mb-2"},"Instructions"),o.default.createElement("p",{className:"text-sm mb-2"},"In order to complete this mission and receive payment you must upload a single HD video file that is between 10-15 minutes in length, and shows the homes pure beauty. We really encourage all pilots to use creativity and display different types of shots and filming tricks that drones can do so well. These include but are not limited to Aerial Pans, Fly Overs, and Reveals. "),o.default.createElement("p",{className:"text-sm mb-2"},"Once you upload the video we will review it within 24 hours and transfer a payment to your connected stripe account."),o.default.createElement("p",{className:"text-sm mb-2"},"Happy Filming!")),o.default.createElement("div",{className:""},o.default.createElement(b.default,{header:"Upload filming",fileTypeName:"video",padding:!0,source:"PilotUploadVideo",uploadMethod:"S3",fieldname:"orders",uploadToId:t.id,mimes:"videos",auto:!1,endpoint:"orders/"+t.id+"/"+t.uuid,returnUploadInstance:this.returnUploadInstance})),this.state.hideIrrelevant?null:o.default.createElement("div",{className:"flex py-2 border border-red-darker bg-red-lightest rounded mt-4"},o.default.createElement("p",{className:"text-xs px-4 flex items-center"},"WARNING: Bailing on a mission is basically stating that you can not complete it, and will remove you from this mission and forfeit any bounty you may have wanted."),o.default.createElement("div",{className:"w-1/2 px-4"},o.default.createElement(c.Mutation,{mutation:C.default},(function(a){return o.default.createElement("button",{className:" action-button button-red",onClick:function(n){return e.handleBailMission(a,t,n)}},o.default.createElement("span",{className:" action-button-overlay"}),"Bail on this mission")}))))):"initial_processing"===t.status?o.default.createElement("div",{className:"mt-8 rounded-lg border border-grey-light bg-grey-lighter p-4 text-sm"},o.default.createElement("div",{className:"font-bold mb-2"},"Upload Completed"),o.default.createElement("p",{className:""},"Your upload has completed, we got some processing to do now. We will get back to you shortly. In the meantime why dont you find another mission or check out some new shiny gear. (drone affiliate link as extra revenue source)")):"awaiting_review"===t.status||"final_processing"===t.status?o.default.createElement("div",{className:"mt-8 rounded-lg border border-grey-light bg-grey-lighter p-4 text-sm"},o.default.createElement("div",{className:"font-bold mb-2"},"Your video is awaiting review"),o.default.createElement("p",null,"Please be patient and allow us 24 hours to process/review your upload and if all is well, we will send your payout along with a email notifying you that payment was sent.")):"approved_completed"===t.status?o.default.createElement("div",{className:""},o.default.createElement("div",{className:"my-6"},o.default.createElement(y.default,{order:t})),o.default.createElement("div",{className:"mb-2 text-sm font-bold"},"Submitted video"),o.default.createElement(E.Player,null,o.default.createElement("source",{src:t.assets[0].url}))):"rejected"===t.status?o.default.createElement("div",{className:""},"Rejected"):null):o.default.createElement("div",{className:"mt-8 mb-2"},o.default.createElement("div",{className:"rounded-lg border border-grey-light bg-grey-lighter p-4"},o.default.createElement("p",null,"By accepting this mission we you are stating that you will fulfill the task of filming with in a 24 hour period. We allow you to accept multiple missions within a 24 hour period but please dont accept more missions than you can complete within our 24 period and during daylight hours (after dawn, and before dusk). Thank you."),o.default.createElement("div",{className:"pt-6"},o.default.createElement(c.Mutation,{mutation:k.default},(function(a){return o.default.createElement("button",{className:" action-button button-green",onClick:function(n){return e.handleAcceptMission(a,t,n)}},"Accept mission for details",o.default.createElement("span",{className:" action-button-overlay"}))})))))))}}]),t}(u.Component);t.default=(0,c.graphql)(I.default,{props:function(e){var t=e.ownProps,a=e.mutate;return{uploadedVideo:function(e){var n=e.id,r=e.status,l=e.uploadedAt,i=e.rawUrl;return a({variables:{input:{id:n,authorizedId:t.order.pilot.id,status:r,uploadedAt:l,rawUrl:i}}})}}}})(A)},880:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: JoinPilotInput) {\n    joinPilot(input: $input) {\n      order {\n        status\n        pilotAcceptedAt\n        agentAcceptedAt\n        agent {\n          id\n          type\n        }\n        pilot {\n          id\n          type\n        }\n      }\n    }\n  }\n"],["\n  mutation($input: JoinPilotInput) {\n    joinPilot(input: $input) {\n      order {\n        status\n        pilotAcceptedAt\n        agentAcceptedAt\n        agent {\n          id\n          type\n        }\n        pilot {\n          id\n          type\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},881:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: BailPilotInput) {\n    bailPilot(input: $input) {\n      order {\n        status\n        pilotAcceptedAt\n        agentAcceptedAt\n        agent {\n          id\n          type\n        }\n        pilot {\n          id\n          type\n        }\n      }\n    }\n  }\n"],["\n  mutation($input: BailPilotInput) {\n    bailPilot(input: $input) {\n      order {\n        status\n        pilotAcceptedAt\n        agentAcceptedAt\n        agent {\n          id\n          type\n        }\n        pilot {\n          id\n          type\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},882:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: UploadedInput) {\n    uploadedOrder(input: $input){\n      order {\n        id\n        status\n        uploadedAt\n      }\n    }\n  }\n"],["\n  mutation($input: UploadedInput) {\n    uploadedOrder(input: $input){\n      order {\n        id\n        status\n        uploadedAt\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},883:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(12)),r=u(a(15)),l=u(a(13)),i=u(a(14)),s=a(2),d=u(s);function u(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleInputChange",value:function(){}},{key:"render",value:function(){return d.default.createElement("div",null)}}]),t}(s.Component);t.default=o},884:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(12)),r=m(a(15)),l=m(a(13)),i=m(a(14)),s=a(2),d=m(s),u=a(29),o=(a(259),a(16),a(6),a(525),m(a(264)),m(a(569))),c=m(a(518));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleImageEdit=a.handleImageEdit.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleImageEdit",value:function(){this.props.assetQuery.refetch()}},{key:"render",value:function(){var e=this,t=this.props.assetQuery,a=t.loading,n=t.getAssets;if(a)return d.default.createElement("div",null,"Loading");if(n.assets.length<1)return d.default.createElement("div",null,"Results empty.");var r=n.assets.filter((function(e){return"video_og"===e.assetableName}))[0],l=n.assets.filter((function(e){return"image"===e.type}));return console.log(r),d.default.createElement("div",null,"standard"===this.props.order.plan||"premium"===this.props.order.plan?d.default.createElement("div",null,d.default.createElement("div",{className:"my-8"},d.default.createElement("div",{className:"font-bold text-xl my-2"},"Your Completed Order"),d.default.createElement("div",{className:"md:-mx-4"},d.default.createElement("div",{className:""},d.default.createElement(o.default,{asset:r,orderId:this.props.order.id,uuid:this.props.order.uuid}))))):null,d.default.createElement("div",null,d.default.createElement("div",{className:"my-8"},d.default.createElement("div",{className:"font-bold text-xl my-2"},"Photos"),d.default.createElement("div",{className:"flex flex-wrap -mx-4"},l.map((function(t,a){return d.default.createElement("div",{className:"w-full md:w-1/4",key:"col_"+a},d.default.createElement(o.default,{asset:t,orderId:e.props.order.id,handleImageEdit:e.handleImageEdit,uuid:e.props.order.uuid}))}))))))}}]),t}(s.Component);t.default=(0,u.graphql)(c.default,{name:"assetQuery",options:function(e){return{variables:{input:{modelId:e.order.id,modelType:"order",modelName:e.assetNames}}}}})(f)},885:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(12)),r=g(a(15)),l=g(a(13)),i=g(a(14)),s=a(2),d=g(s),u=a(29),o=a(259),c=a(525),m=a(82),f=g(a(518)),p=g(a(886)),h=g(a(887));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedImages:[]},a.handleInputChange=a.handleInputChange.bind(a),a.rejectOrder=a.rejectOrder.bind(a),a.approveOrderText=a.approveOrderText.bind(a),a.approveOrder=a.approveOrder.bind(a),a.toggleAcceptedImage=a.toggleAcceptedImage.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleInputChange",value:function(e){var t=e.currentTarget;this.setState({rejectedDescription:t.value})}},{key:"toggleAcceptedImage",value:function(e){var t=e.currentTarget.getAttribute("awsid");if((0,o.contains)(t,this.state.selectedImages)){var a=(0,o.indexOf)(t,this.state.selectedImages);this.setState((function(e){return{selectedImages:(0,o.remove)(a,1,e.selectedImages)}}))}else this.setState((function(e){return{selectedImages:(0,o.concat)(e.selectedImages,[t])}}))}},{key:"approveOrderText",value:function(){return this.state.selectedImages.length>20?this.state.selectedImages.length-20+" too many photos":this.state.selectedImages.length<20?"Need "+(20-this.state.selectedImages.length)+" more photos":"Accept Video and Photos"}},{key:"approveOrder",value:function(){var e=this;20===this.state.selectedImages.length&&this.props.approveOrder({id:this.props.order.id,authorizedId:this.props.order.id,order:{photos:this.state.selectedImages}}).then((function(t){e.props.updateCallback(t)}))}},{key:"rejectOrder",value:function(){var e=this;window.confirm("Are you sure you want to reject this filming?")&&(m.toast.error("Filming rejected, Rolling back this orders status."),this.props.rejectOrder({id:this.props.order.id,authorizedId:this.props.order.id,order:{rejectedDescription:this.state.rejectedDescription,pilotId:this.props.order.pilot?this.props.order.pilot.id:null}}).then((function(t){e.props.history.push("/dashboard")})))}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.loading,n=t.getAssets;if(a)return d.default.createElement("div",null,"Loading");if(n.assets.length<1)return d.default.createElement("div",null,"Results empty.");var r=n.assets.filter((function(e){return"video_wm"===e.assetableName})),l=n.assets.filter((function(e){return"video_og"===e.assetableName})),i=n.assets.filter((function(e){return"image"===e.type}));return d.default.createElement("div",null,"standard"===this.props.order.plan||"premium"===this.props.order.plan?d.default.createElement("div",{className:"reviewcontainer"},d.default.createElement("div",{className:""},d.default.createElement("div",{className:""},"Review Videos")),d.default.createElement("div",{className:"flex flex-wrap md:-mx-4"},d.default.createElement("div",{className:"w-full md:w-1/2 p-4 rounded-lg"},d.default.createElement(c.Player,null,d.default.createElement("source",{src:l[0].url}))),d.default.createElement("div",{className:"w-full md:w-1/2 p-4 rounded-lg"},d.default.createElement(c.Player,null,d.default.createElement("source",{src:r[0].url}))))):null,d.default.createElement("div",{className:"my-8"},d.default.createElement("div",{className:""},d.default.createElement("div",{className:""},"Select 20 Acceptable Photos")),i.length>0?d.default.createElement("div",{className:"flex flex-wrap md:-mx-4"},i.map((function(t,a){return d.default.createElement("div",{key:"col_"+a,onClick:e.toggleAcceptedImage,className:"w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 relative hover:cursor-pointer",awsid:t.awsId},d.default.createElement("div",{className:"relative"},d.default.createElement("img",{src:t.url,className:"rounded-lg border border-grey border-solid"}),d.default.createElement("div",{className:"img-overlay "+((0,o.contains)(t.awsId,e.state.selectedImages)?"opacity-100":"opacity-0")},d.default.createElement("span",{className:"far fa-check-circle fa-2x"}))))}))):null,d.default.createElement("div",{className:"flex flex-wrap-reverse md:-mx-4"},d.default.createElement("div",{className:"w-full md:w-1/2 p-4"},d.default.createElement("div",{className:"text-xl font-bold mb-2"},"Reject filming"),d.default.createElement("textarea",{name:"rejectedDecription",className:"input w-full h-24",placeholder:"Please explain the rejection (this will be sent to the pilot)",onChange:this.handleInputChange}),d.default.createElement("button",{className:" action-button button-red px-8 py-3 mt-2",onClick:this.rejectOrder},d.default.createElement("span",{className:" action-button-overlay"}),"Reject Filming")),d.default.createElement("div",{className:"w-full md:w-1/2 p-4"},d.default.createElement("a",{className:" action-button button-green px-8 py-3",onClick:this.approveOrder},d.default.createElement("span",{className:" action-button-overlay"}),this.approveOrderText())))))}}]),t}(s.Component);t.default=(0,u.compose)((0,u.graphql)(f.default,{options:function(e){return{variables:{input:{modelId:e.order.id,modelType:"order",modelName:e.assetNames}}}}}),(0,u.graphql)(p.default,{props:function(e){e.ownProps;var t=e.mutate;return{approveOrder:function(e){return t({variables:{input:e}})}}}}),(0,u.graphql)(h.default,{props:function(e){e.ownProps;var t=e.mutate;return{rejectOrder:function(e){return t({variables:{input:e}})}}}}))(v)},886:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: UpdateOrderInput){\n    approveOrder(input: $input){\n      order{\n        id\n      }\n    }\n  }\n"],["\n  mutation($input: UpdateOrderInput){\n    approveOrder(input: $input){\n      order{\n        id\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},887:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: UpdateOrderInput){\n    rejectOrder(input: $input){\n      order{\n        id\n      }\n    }\n  }\n"],["\n  mutation($input: UpdateOrderInput){\n    rejectOrder(input: $input){\n      order{\n        id\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},888:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(12)),r=u(a(15)),l=u(a(13)),i=u(a(14)),s=a(2),d=u(s);a(16),u(a(889));function u(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={directions:[]},e.initMap=e.initMap.bind(e),e.calculateAndDisplayRoute=e.calculateAndDisplayRoute.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.initMap()}},{key:"initMap",value:function(){var e=new google.maps.DirectionsService,t=new google.maps.Map(document.getElementById("mapArea"),{zoom:13,center:{lat:this.props.location.lat,lng:this.props.location.lng}}),a=new google.maps.DirectionsRenderer({map:t}),n=new google.maps.InfoWindow;this.calculateAndDisplayRoute(a,e,[],n,t)}},{key:"calculateAndDisplayRoute",value:function(e,t,a,n,r){for(var l=0;l<a.length;l++)a[l].setMap(null);var i=this;t.route({origin:i.props.location.lat+","+i.props.location.lng,destination:i.props.htf.lat+","+i.props.htf.lng,travelMode:"DRIVING"},(function(t,a){if("OK"===a){var n=[],r=t.routes[0].legs[0].distance.value,l=t.routes[0].legs[0].duration.value;t.routes[0].legs[0].steps.map((function(e){return n.push(e.instructions)})),i.setState({distance:r,duration:l,directions:n},(function(){i.props.returnMapInfo({distance:Math.round(parseInt(i.state.distance)/1609.34*10)/10,duration:Math.round(parseInt(i.state.duration)/60).toString().split(".")[0]})})),e.setDirections(t)}}))}},{key:"render",value:function(){return d.default.createElement("div",{className:"bg-white rounded shadow p-6"},d.default.createElement("div",{className:"flex pb-2"},d.default.createElement("div",{className:"text-xl font-bold"},"Map"),d.default.createElement("div",{className:"flex-1 ml-4 text-right text-xs"},"est. drive time",d.default.createElement("span",{className:"text-xl font-bold inline-block ml-2"},this.state.duration?Math.round(parseInt(this.state.duration)/60).toString().split(".")[0]:"NA"))),d.default.createElement("div",{id:"mapArea",className:"w-full h-64 border border-grey-dark"}),d.default.createElement("div",{className:(this.props.directionsVisible?"block":"hidden")+" mt-4"},d.default.createElement("div",{className:"font-bold text-sm"},"Driving directions"),d.default.createElement("ul",{id:"drivingDirections"},this.state.directions?this.state.directions.map((function(e,t){return d.default.createElement("li",{key:"direction_"+t,className:"flex text-sm my-3",dangerouslySetInnerHTML:{__html:'<i class="fas fa-map-pin inline-block mr-2 text-grey"></i> <div class="flex-1">'+e+"</div>"}})})):null)))}}]),t}(s.Component);t.default=o},889:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=a(23),l=n.StyleSheet.create({mapArea:{minWidth:"300px",minHeight:"300px",marginBottom:"1.5rem"},mapDistance:{float:"left",width:"50%",textAlign:"right",color:"#999"},mapDuration:{float:"left",width:"50%",textAlign:"right",color:"#999"},mapHeadTitle:{display:"inline-block",textAlign:"right",fontSize:"0.8rem",lineHeight:"1rem",marginRight:"0.6rem"},mapHeadValue:{display:"inline-block"},mapBigText:{fontSize:"2.4rem",fontFamily:'"Droid serif", Times, serif',fontWeight:"bold",color:r.c.green},mapDirectionItem:{padding:"0.6rem 0.4rem",color:"#454545"},mapDirectionIcon:{display:"inline-block",verticalAlign:"top",padding:"0.4rem 0.6rem 0 0",color:"#454545"},mapDirectionText:{display:"inline-block",width:"85%",fontFamily:"Helvetica Neue, Avenir Next, Arial, sans-serif"}});t.default=l},890:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(12)),r=o(a(15)),l=o(a(13)),i=o(a(14)),s=a(2),d=o(s),u=(a(16),o(a(0)));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleInputChange",value:function(){}},{key:"render",value:function(){return d.default.createElement("div",null,this.props.orders.map((function(e){return d.default.createElement("div",{key:"order_"+e.id},d.default.createElement("div",null,(0,u.default)(Date.parse(e.createdAt)).format("MMM Do YYYY")),d.default.createElement("div",null,e.address.address1))})))}}]),t}(s.Component);t.default=c},891:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(56)),r=v(a(57)),l=v(a(12)),i=v(a(15)),s=v(a(13)),d=v(a(14)),u=a(2),o=v(u),c=a(29),m=(a(6),v(a(555))),f=v(a(892)),p=v(a(264)),h=a(261),g=v(a(262));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,h.getEnv)(window.location.host),b=p.default.stripe[y].publishable_key,E=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={paymentVerified:!1,addressVerified:!1,selectedPlan:g.default.filter((function(t){return t.name===e.match.params.plan?t:null}))[0],price:g.default.filter((function(t){return t.name===e.match.params.plan?t:null}))[0].price,amountPaid:g.default.filter((function(t){return t.name===e.match.params.plan?t:null}))[0].actualPrice,loading:!1,errors:[]},a.stripe=Stripe(b),a.elements=a.stripe.elements(),a.handleReturnedLocation=a.handleReturnedLocation.bind(a),a.handleReturnedPayment=a.handleReturnedPayment.bind(a),a.handleGQLErrors=a.handleGQLErrors.bind(a),a.submitOrder=a.submitOrder.bind(a),a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.card=this.elements.create("card"),this.card.mount("#card-element");var e=this;this.card.addEventListener("change",(function(t){t.complete?e.setState({paymentVerified:!0}):e.setState({paymentVerified:!1})}))}},{key:"handleGQLErrors",value:function(e){var t=this;e.graphQLErrors.map((function(e){t.setState((function(t){return{errors:t.errors.concat(e.message)}}))}))}},{key:"handleReturnedLocation",value:function(e){var t=e.address1,a=e.address2,n=e.city,r=e.state,l=e.zip,i=e.lat,s=e.lng;t&&n&&r&&l&&i&&s&&this.setState({address1:t,address2:a,city:n,state:r,zip:l,lat:i,lng:s,addressVerified:!0})}},{key:"handleReturnedPayment",value:function(e){var t=this,a=e.discountId,n=e.discountedActualPrice,r=e.discountedPrice;a?this.setState({discountId:a,amountPaid:n,price:r}):this.setState({price:g.default.filter((function(e){return e.name===t.props.match.params.plan?e:null}))[0].price,amountPaid:g.default.filter((function(e){return e.name===t.props.match.params.plan?e:null}))[0].actualPrice,discountId:null})}},{key:"submitOrder",value:function(e){var t=this;e&&this.state.addressVerified&&this.setState({loading:!this.state.loading},(0,r.default)(n.default.mark((function a(){var r,l;return n.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.props.submitOrder({plan:e,state:t.state}).catch((function(e){t.handleGQLErrors(e)}));case 2:r=a.sent,l=r.data.createOrder.order,console.log("new order",l),t.props.history.push("/orders/"+l.id);case 6:case"end":return a.stop()}}),a,t)}))))}},{key:"render",value:function(){return o.default.createElement("div",{className:"flex justify-center"},o.default.createElement("div",{className:"w-full lg:w-1/2"},o.default.createElement("div",{className:"font-bold text-xl my-2"},"Order a new filming"),o.default.createElement("div",{className:"bg-white rounded shadow"},o.default.createElement("div",{className:"p-6"},o.default.createElement(m.default,{handleReturnedLocation:this.handleReturnedLocation,handleReturnedPayment:this.handleReturnedPayment,plan:this.state.selectedPlan,price:this.state.price,actualPrice:this.state.amountPaid}),o.default.createElement("div",{className:""},o.default.createElement("button",{onClick:this.submitOrder,className:" action-button button-green"},o.default.createElement("span",{className:" action-button-overlay"}),"Order now"))))))}}]),t}(u.Component);t.default=(0,c.graphql)(f.default,{props:function(e){e.ownProps;var t=e.mutate;return{submitOrder:function(e){var a=e.state;e.plan;return t({variables:{input:{order:{status:"pending",amountPaid:a.amountPaid,discountId:a.discountId,plan:{id:a.selectedPlan.planId,name:a.selectedPlan.name,actualPrice:a.selectedPlan.actualPrice},address:{address1:a.address1,address2:a.address2,city:a.city,state:a.state,zipCode:a.zip,lat:a.lat,lng:a.lng}}}}})}}}})(E)},892:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: OrderInput) {\n    createOrder(input: $input){\n      order {\n        id\n        agentId\n        plan\n        receiptId\n        status\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n      }\n    }\n  }\n"],["\n  mutation($input: OrderInput) {\n    createOrder(input: $input){\n      order {\n        id\n        agentId\n        plan\n        receiptId\n        status\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},893:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(32)),r=E(a(12)),l=E(a(15)),i=E(a(13)),s=E(a(14)),d=a(2),u=E(d),o=a(6),c=E(a(894)),m=E(a(648)),f=E(a(646)),p=E(a(903)),h=E(a(904)),g=E(a(558)),v=E(a(515)),y=E(a(921)),b=a(82);function E(e){return e&&e.__esModule?e:{default:e}}var N=function(e){function t(){(0,r.default)(this,t);var e=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e.searchQuery=e.searchQuery.bind(e),e}return(0,s.default)(t,e),(0,l.default)(t,[{key:"searchQuery",value:function(e){var t=e.currentTarget;t.pageType?this.setState((0,n.default)({},t.pageType+"QueryString",t.value)):this.setState((0,n.default)({},t.getAttribute("pagetype")+"QueryString",t.value))}},{key:"pagination",value:function(){}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"container mx-auto mt-8"},u.default.createElement(b.ToastContainer,null),u.default.createElement(o.Switch,null,u.default.createElement(o.Route,{path:"/admin/pilots/:pageNumber?",render:function(t){var a=t.match;return u.default.createElement("div",{className:"mx-4 md:mx-0 pb-8"},u.default.createElement("div",{className:"flex my-4"},u.default.createElement("div",{className:"flex-1 flex items-end"},u.default.createElement("h3",{className:"font-bold text-xl"},"Pilots")),console.log(a),u.default.createElement("div",{className:"w-2/3"},u.default.createElement(y.default,{pageType:"user",placeHolder:"Search by name, account ID, or email",queryString:e.state.userQueryString,searchQuery:e.searchQuery}))),u.default.createElement(m.default,{showPagination:!0,match:a,sortBy:"createdAt",sizeLimit:20,pageNumber:a.params.pageNumber||1,criteria:{type:"pilot"},queryString:e.state.userQueryString,searchQuery:e.searchQuery}))}}),u.default.createElement(o.Route,{path:"/admin/agents/:pageNumber?",render:function(t){var a=t.match;return u.default.createElement("div",{className:"mx-4 md:mx-0 pb-8"},u.default.createElement("div",{className:"flex my-4"},u.default.createElement("div",{className:"flex-1 flex items-end"},u.default.createElement("h3",{className:"font-bold text-xl"},"Agents")),u.default.createElement("div",{className:"w-1/2"},u.default.createElement(y.default,{pageType:"user",placeHolder:"Search by name, customer ID, or email",queryString:e.state.userQueryString,searchQuery:e.searchQuery}))),u.default.createElement(m.default,{showPagination:!0,match:a,sortBy:"createdAt",sizeLimit:20,pageNumber:a.params.pageNumber||1,criteria:{type:"agent"},queryString:e.state.userQueryString,searchQuery:e.searchQuery}))}}),u.default.createElement(o.Route,{path:"/admin/:type/profile/:userId",render:function(t){var a=t.match;return u.default.createElement("div",{className:"flex flex-wrap"},u.default.createElement("div",{className:"w-full lg:w-3/4"},u.default.createElement(g.default,{userid:a.params.userId})),u.default.createElement("div",{className:"w-full lg:w-1/4 lg:pl-8 pt-4"},u.default.createElement("h3",{className:"font-bold text-right"},"Recent History"),u.default.createElement("div",{className:"w-full pt-2 pb-4"},u.default.createElement(y.default,{pageType:"order",placeHolder:"Search by status, or receipt ID",queryString:e.state.orderQueryString,searchQuery:e.searchQuery})),u.default.createElement("div",{className:"w-full"},u.default.createElement(f.default,{cssSizing:"w-full sm:w-1/2 md:w-1/3 lg:w-full",sortBy:"createdAt",criteria:(0,n.default)({},(a.params.type?a.params.type:"")+"Id",a.params.userId),queryString:e.state.orderQueryString,searchQuery:e.searchQuery}))))}}),u.default.createElement(o.Route,{path:"/admin/orders/:pageNumber?",render:function(t){var a=t.match;return u.default.createElement("div",{className:"mx-4 md:mx-0 pb-8"},u.default.createElement("div",{className:"flex flex-wrap my-4 mx-4 md:mx-0"},u.default.createElement("div",{className:"flex-1 flex items-end"},u.default.createElement("h3",{className:"font-bold text-xl"},"Orders")),console.log("match",a),u.default.createElement("div",{className:"w-1/2"},u.default.createElement(y.default,{pageType:"order",placeHolder:"Search by status, receipt ID, or plan",queryString:e.state.orderQueryString,searchQuery:e.searchQuery}))),u.default.createElement(f.default,{showPagination:!0,match:a,sortBy:"createdAt",sizeLimit:20,pageNumber:parseInt(a.params.pageNumber)||1,criteria:{},queryString:e.state.orderQueryString}))}}),u.default.createElement(o.Route,{path:"/admin/order/:orderId",render:function(t){var a=t.match;return u.default.createElement("div",null,u.default.createElement(v.default,{orderid:a.params.orderId,history:e.props.history}))}}),u.default.createElement(o.Route,{path:"/admin/discounts",render:function(e){e.match;return u.default.createElement("div",null,u.default.createElement("div",{className:"flex flex-wrap w-full"},u.default.createElement(h.default,null)),u.default.createElement("div",{className:"flex flex-wrap -mx-6"},u.default.createElement("div",{className:"w-full px-6 my-8 pb-4"},u.default.createElement("div",{className:"font-bold text-xl my-2"},"Discounts"),u.default.createElement(p.default,null))))}}),u.default.createElement(o.Route,{path:"/settings",render:function(e){e.match;return u.default.createElement(g.default,null)}}),u.default.createElement(o.Route,{render:function(e){e.match;return u.default.createElement(c.default,null)}})))}}]),t}(d.Component);t.default=N},894:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(2)),r=i(a(646)),l=i(a(648));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return n.default.createElement("div",{className:"flex flex-wrap -mx-6"},n.default.createElement("div",{className:"w-full lg:w-1/4 px-6 pb-4"},n.default.createElement("div",{className:"font-bold text-xl my-2"},"Unverified Pilots"),n.default.createElement(l.default,{cssSizing:"w-full",sortBy:"createdAt",sizeLimit:20,criteria:{type:"pilot",isVerified:!1}})),n.default.createElement("div",{className:"w-full lg:w-3/4 px-6 pb-4"},n.default.createElement("div",null,n.default.createElement("div",{className:"font-bold text-xl my-2"},"Orders needing review"),n.default.createElement(r.default,{cssSizing:"w-full lg:w-1/3",sortBy:"uploadedAt",sizeLimit:80,criteria:{status:"awaiting_review",needsAttention:!0}}))))}},895:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(12)),r=m(a(15)),l=m(a(13)),i=m(a(14)),s=a(2),d=m(s),u=a(6),o=(a(29),a(16),m(a(497))),c=a(261);m(a(565));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,n.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.cssSizing||"w-full sm:w-1/2 md:w-1/3 lg:w-1/4",t=this.props.order;return d.default.createElement("div",{className:e+" px-4 pb-6"},d.default.createElement("div",{className:"bg-white rounded shadow p-4"},d.default.createElement("div",{className:"py-4"},d.default.createElement("p",{className:"text-center font-medium"},(0,c.humanize)(t.status)),d.default.createElement("p",{className:"text-center text-xs"},(0,c.dateTimeShort)(t.createdAt))),d.default.createElement("div",{className:""},d.default.createElement("div",{className:"text-center font-medium"},t.address.address1),d.default.createElement("div",{className:"text-center text-sm"},t.address.city+", "+t.address.state+" "+t.address.zipCode)),d.default.createElement("div",{className:"py-4 overflow-auto"},d.default.createElement("div",{className:"flex py-2"},d.default.createElement("div",{className:"mr-2"},d.default.createElement(o.default,{src:t.agent.avatar?t.agent.avatar.url:null,size:"medium"})),d.default.createElement("div",{className:""},d.default.createElement("p",{className:"text-right"},t.agent.name),d.default.createElement("p",{className:"text-xs uppercase text-right"},"Agent"))),d.default.createElement("div",{className:"flex float-right py-2"},d.default.createElement("div",{className:""},d.default.createElement("p",{className:"text-right"},t.pilot?t.pilot.name:"Recruiting now"),d.default.createElement("p",{className:"text-xs uppercase"},"Pilot")),d.default.createElement("div",{className:"ml-2"},t.pilot?d.default.createElement(o.default,{src:t.pilot.avatar?t.pilot.avatar.url:null,size:"medium"}):d.default.createElement("i",{className:"text-grey-light far fa-question-circle fa-3x"})))),d.default.createElement("div",{className:"text-center text-xs py-4"},d.default.createElement("a",{href:"https://dashboard.stripe.com/payments/"+t.receiptId,target:"_blank"},t.receiptId)),d.default.createElement("div",{className:"flex leading-normal"},d.default.createElement("div",{className:" flex-1 text-xs text-right"},d.default.createElement(u.Link,{className:"inline-block text-blue-darker border border-blue-darker py-1 px-6 rounded-full",to:"/admin/order/"+t.id},"View")))))}}]),t}(s.Component);t.default=f},901:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(12)),r=m(a(15)),l=m(a(13)),i=m(a(14)),s=a(2),d=m(s),u=a(6),o=(a(29),a(259),m(a(497))),c=m(a(902));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){(0,n.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderApiLink=e.renderApiLink.bind(e),e}return(0,i.default)(t,e),(0,r.default)(t,[{key:"renderApiLink",value:function(e){return"agent"===e.type?e.customerId?d.default.createElement("a",{href:"https://dashboard.stripe.com/customers/"+e.customerId,target:"_blank"},e.customerId):"Not connected yet.":"pilot"===e.type?e.accountId?d.default.createElement("a",{href:"https://dashboard.stripe.com/applications/users/"+e.accountId,target:"_blank"},e.accountId):"Not connected yet.":"Not applicable"}},{key:"render",value:function(){var e=this.props.user,t=this.props.cssSizing||"w-full sm:w-1/2 md:w-1/3 lg:w-1/4",a=e.contacts.filter((function(e){return e.default?e:null}))[0];return d.default.createElement("div",{className:t+" px-4 pb-6"},d.default.createElement("div",{className:"bg-white rounded shadow px-4 py-3 relative"},"pilot"===e.type?d.default.createElement("div",{className:"absolute pin-t pin-l w-full p-2 flex"},d.default.createElement("div",{className:"flex-1"},"Rejected: ",e.rejectedCount),d.default.createElement("div",{className:"flex-1 text-right"},"Aborted: ",e.abortCount)):null,d.default.createElement("div",{className:"py-4 w-20 mx-auto"},d.default.createElement(o.default,{size:"large",src:e.avatars.length>0?e.avatars[0].url:null})),d.default.createElement("p",{className:"text-center"},e.name),d.default.createElement("p",{className:"text-center"},d.default.createElement("a",{className:"text-xs",href:"mailto:"+e.email},e.email)),d.default.createElement("div",{className:"py-4"},"pilot"===e.type?d.default.createElement("div",null,e.isVerified?d.default.createElement("p",{className:"text-center text-sm"},d.default.createElement("i",{className:"far fa-check-circle text-green"})," ",d.default.createElement("span",{className:"font-medium"},"Verified")):d.default.createElement("p",{className:"text-center text-sm"},d.default.createElement("i",{className:"far fa-times-circle text-red"})," ",d.default.createElement("span",{className:"font-medium"},"Unverified"))):null,d.default.createElement("div",{className:"text-xs"},a?d.default.createElement(c.default,{noIcons:!0,center:!0,contact:a}):null)),d.default.createElement("div",{className:"text-xs text-center py-4"},this.renderApiLink(e)),d.default.createElement("div",{className:"flex leading-normal"},d.default.createElement("div",{className:"flex-1 capitalize text-sm"},d.default.createElement("i",{className:("pilot"===e.type?"fas fa-plane":"far fa-id-badge")+" mr-2","data-fa-transform":"rotate--20"}),e.type),d.default.createElement("div",{className:"flex-1 text-xs text-right"},d.default.createElement(u.Link,{className:"inline-block text-blue-darker border border-blue-darker py-1 px-6 rounded-full",to:"/admin/"+e.type+"/profile/"+e.id},"View")))))}}]),t}(s.Component);t.default=f},902:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(2)),r=a(16),l=a(259),i=d(a(650)),s=d(a(557));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=(0,l.find)((0,l.propEq)("type",e.contact.type))(s.default);return n.default.createElement("div",{className:e.center?"text-center":""},t?n.default.createElement("span",null,t.useText||e.noIcons?n.default.createElement("span",null,n.default.createElement("strong",null,t.humanized," ")):n.default.createElement("i",{className:t.icon+" "+(0,r.css)(i.default.subduedIcon)}),t.ext?n.default.createElement("a",{href:t.ext+":"+e.contact.content},t.formatter?t.formatter(e.contact.content):e.contact.content):""+e.contact.content):null)}},903:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(12)),r=f(a(15)),l=f(a(13)),i=f(a(14)),s=a(2),d=f(s),u=a(29),o=a(6),c=a(261),m=f(a(651));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleInputChange=a.handleInputChange.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleInputChange",value:function(){}},{key:"render",value:function(){var e=this.props.data,t=e.loading,a=e.getDiscounts;return t?d.default.createElement("div",null,"Loading"):d.default.createElement("div",{className:"flex flex-wrap mb-6 md:-mx-4"},a.discounts.map((function(e){return d.default.createElement("div",{className:"p-4 w-1/4",key:"discount_"+e.id},d.default.createElement("div",{className:"flex flex-col h-full bg-white rounded shadow p-4"},d.default.createElement("div",{className:"flex-1"},d.default.createElement("h4",{className:"text-center mb-2"},e.code),d.default.createElement("p",{className:"text-lg text-center mb-4"},e.amount),d.default.createElement("p",{className:"text-xs font-bold text-center mb-1"},"Duration"),e.startsAt||e.endsAt?d.default.createElement("div",{className:"mt-4"},e.startsAt?d.default.createElement("div",{className:"text-xs text-center"},(0,c.dateShort)(e.startsAt)):d.default.createElement("div",{className:"text-xs text-center"},"no start date"),d.default.createElement("div",{className:"text-xs text-center"}," - "),e.endsAt?d.default.createElement("div",{className:"text-xs text-center"},(0,c.dateShort)(e.endsAt)):d.default.createElement("div",{className:"text-xs text-center"},"continuous")):d.default.createElement("p",{className:"text-sm text-center"},"Continuous"),e.appliesTo&&"all"!==e.appliesTo?d.default.createElement("div",{className:"mt-4"},d.default.createElement("p",{className:"text-xs font-bold text-center mb-1"},"Apllies to plan"),d.default.createElement("div",{className:"text-xs text-center"},(0,c.humanize)(e.appliesTo))):null,e.maxUsageCount?d.default.createElement("div",{className:"mt-4"},d.default.createElement("p",{className:"text-xs font-bold text-center mb-1"},"Availability"),d.default.createElement("div",{className:"text-xs text-center"},e.usageCount," of ",e.maxUsageCount)):null),d.default.createElement("div",{className:"flex self-end leading-normal mt-4"},d.default.createElement("div",{className:" flex-1 text-xs text-right"},d.default.createElement(o.Link,{className:"inline-block text-blue-darker border border-blue-darker py-1 px-6 rounded-full",to:"/admin/orders/discountId/"+e.id},"View orders")))))})))}}]),t}(s.Component);t.default=(0,u.graphql)(m.default,{options:function(e){return{variables:{input:{}}}}})(p)},904:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(56)),r=y(a(57)),l=y(a(32)),i=y(a(12)),s=y(a(15)),d=y(a(13)),u=y(a(14)),o=a(2),c=y(o),m=a(29),f=y(a(925)),p=y(a(0)),h=y(a(262)),g=y(a(911)),v=y(a(651));function y(e){return e&&e.__esModule?e:{default:e}}a(912);var b=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={startsDate:(0,p.default)(),endsDate:(0,p.default)().add(1,"M"),dateChanged:!1,planOpen:!1,appliesTo:"all"},a.toggleDropdownHandler=a.toggleDropdownHandler.bind(a),a.handlePlanChange=a.handlePlanChange.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}var a;return(0,u.default)(t,e),(0,s.default)(t,[{key:"toggleDropdownHandler",value:function(){this.setState({planOpen:!this.state.planOpen})}},{key:"handleDateChange",value:function(e,t){var a;this.setState((a={},(0,l.default)(a,e,t),(0,l.default)(a,"dateChanged",!0),a))}},{key:"handlePlanChange",value:function(e){this.setState({appliesTo:e.currentTarget.getAttribute("plan")})}},{key:"handleInputChange",value:function(e){this.setState((0,l.default)({},e.currentTarget.name,e.currentTarget.value))}},{key:"handleSubmit",value:(a=(0,r.default)(n.default.mark((function e(){var t,a,r=this;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!!this.state.amount&&[".","%"].some((function(e){return r.state.amount?r.state.amount.includes(e):null})),a=!this.state.dateChanged||this.state.endsDate.isAfter(this.state.startsDate),!(this.state.code&&t&&a)){e.next=7;break}return e.next=5,this.props.submitDiscount({appliesTo:this.state.appliesTo,amount:this.state.amount,code:this.state.code,startsAt:this.state.dateChanged?this.state.startsDate:null,endsAt:this.state.dateChanged?this.state.endsDate:null,maxUsageCount:this.state.maxUsageCount});case 5:e.sent,this.setState({code:"",amount:""});case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"bg-white rounded shadow p-4 w-full"},c.default.createElement("h3",{className:"font-bold"},"Add a discount"),c.default.createElement("div",{className:"flex flex-wrap -mx-2 mt-4"},c.default.createElement("div",{className:"px-2 flex-1 sm:w-1/2 md:w-1/3 mb-4 lg:w-auto lg:mb-auto"},c.default.createElement("div",{className:"text-xs"},"Code"),c.default.createElement("input",{type:"text",className:"input",name:"code",placeholder:"ex. happy_holidays",onChange:this.handleInputChange})),c.default.createElement("div",{className:"px-2 w-48 sm:w-1/2 md:w-1/3 mb-4 lg:w-auto lg:mb-auto"},c.default.createElement("div",{className:"text-xs"},"Amount"),c.default.createElement("input",{type:"text",className:"input",name:"amount",placeholder:"ex. 10% or 10.00",onChange:this.handleInputChange})),c.default.createElement("div",{className:"px-2 sm:w-1/2 md:w-1/3 mb-4 lg:w-auto lg:mb-auto"},c.default.createElement("div",{className:"text-xs"},"Starts at"),c.default.createElement(f.default,{className:"input w-full",name:"startsDate",selected:this.state.startsDate,onChange:this.handleDateChange.bind(this,"startsDate")})),c.default.createElement("div",{className:"px-2 sm:w-1/2 md:w-1/3 mb-4 lg:w-auto lg:mb-auto"},c.default.createElement("div",{className:"text-xs"},"Ends at"),c.default.createElement(f.default,{className:"input w-full",name:"endsDate",selected:this.state.endsDate,onChange:this.handleDateChange.bind(this,"endsDate")})),c.default.createElement("div",{className:"px-2 w-32"},c.default.createElement("div",{className:"text-xs"},"Number of offerings"),c.default.createElement("input",{type:"number",className:"input",name:"maxUsageCount",placeholder:"5",onChange:this.handleInputChange})),c.default.createElement("div",{className:"px-2 sm:w-1/2 md:w-1/3 mb-4 lg:w-auto lg:mb-auto"},c.default.createElement("div",{className:"text-xs"},"Apply to plan"),c.default.createElement("div",{className:"inline-block"},c.default.createElement("div",{className:"dropdown relative "+(this.state.planOpen?"is-active":"")},c.default.createElement("div",{className:"dropdown-trigger hover:cursor-pointer"},c.default.createElement("button",{onClick:this.toggleDropdownHandler,className:"select-faker","aria-haspopup":"true","aria-controls":"dropdown-menu"},c.default.createElement("span",{className:"capitalize"},""+("all"===this.state.appliesTo?"All plans":this.state.appliesTo)),c.default.createElement("span",{className:"inline-block ml-6"},c.default.createElement("i",{className:"fa fa-angle-down","aria-hidden":"true"})))),c.default.createElement("div",{className:"dropdown-menu "+(this.state.planOpen?"block":"hidden"),id:"dropdown-menu",role:"menu"},c.default.createElement("div",{className:"p-2 flex flex-wrap bg-white border border-grey rounded"},h.default.map((function(t,a){return c.default.createElement("a",{plan:t.name,proper:t.title,onClick:e.handlePlanChange,className:"w-full block px-2 py-1 hover:cursor-pointer",key:"plan_"+t.name},t.title)}))))))),c.default.createElement("div",{className:"mt-3 px-2"},c.default.createElement("button",{onClick:this.handleSubmit,className:" action-button button-green"},"Add discount",c.default.createElement("span",{className:" action-button-overlay"})))))}}]),t}(o.Component);t.default=(0,m.graphql)(g.default,{props:function(e){e.ownProps;var t=e.mutate;return{submitDiscount:function(e){return t({variables:{input:e},refetchQueries:[{query:v.default,variables:{input:{}}}]})}}}})(b)},911:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: CreateDiscountInput) {\n    createDiscount(input: $input){\n      discount{\n        id\n        code\n      }\n    }\n  }\n"],["\n  mutation($input: CreateDiscountInput) {\n    createDiscount(input: $input){\n      discount{\n        id\n        code\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},915:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(12)),r=g(a(15)),l=g(a(13)),i=g(a(14)),s=a(2),d=g(s),u=a(29),o=(a(16),g(a(36))),c=g(a(499)),m=g(a(518)),f=g(a(578)),p=g(a(916)),h=a(261);function g(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleToggleDefaultAsset=a.handleToggleDefaultAsset.bind(a),a.handleDestroyAsset=a.handleDestroyAsset.bind(a),a.returnUploadInstance=a.returnUploadInstance.bind(a),a.renderAvatar=a.renderAvatar.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"returnUploadInstance",value:function(e){console.log("Upload",e)}},{key:"handleToggleDefaultAsset",value:function(e){this.props.toggleDefaultAsset(e.currentTarget.getAttribute("assetid"),e.currentTarget.getAttribute("userid"))}},{key:"handleDestroyAsset",value:function(e){this.props.destroyAsset(e.currentTarget.getAttribute("assetid"),e.currentTarget.getAttribute("userid"))}},{key:"renderAvatar",value:function(e,t){return d.default.createElement("li",{key:"avatar_"+e.id,className:"flex mb-2"},d.default.createElement("div",{className:"w-1/4 mr-4"},d.default.createElement("img",{src:""+e.url,className:"rounded"})),d.default.createElement("div",{className:"w-3/4"},d.default.createElement("div",{className:"mb-3 mt-2 hover:cursor-pointer",onClick:this.handleToggleDefaultAsset,userid:t.id,assetid:e.id},"make default"),d.default.createElement("div",{className:"hover:cursor-pointer",onClick:this.handleDestroyAsset,userid:t.id,assetid:e.id},"delete")))}},{key:"render",value:function(){var e=this,t=this.props.qGetAssets,a=t.loading,n=t.getAssets;if(a)return d.default.createElement("div",null);var r=n.assets,l=r.length>0?r.find((function(e){return!0===e.default})):null,i=r.length>1?r.filter((function(e){return!0!==e.default})):null,s=this.props.editModeEnabled;return d.default.createElement("div",null,l?d.default.createElement("img",{src:""+l.url,className:"rounded-lg"}):null,s?d.default.createElement("div",{className:"mt-4"},d.default.createElement(c.default,{header:"Upload avatar",fileTypeName:"photo",auto:!0,padding:!0,uploadToId:this.props.user.id,source:"Settings-Avatar",fieldname:"avatar",mimes:"images",endpoint:"/uploads/avatar",returnUploadInstance:this.returnUploadInstance}),d.default.createElement("div",{className:"mt-6"},d.default.createElement("h3",{className:"font-bold mb-2 text-right"},"Avatars"),d.default.createElement("ul",{className:"",id:"avatarList"},i?i.map((function(t,a){return e.renderAvatar(t,e.props.user)})):null))):i?d.default.createElement("div",{className:"flex flex-wrap -mx-2"},i.map((function(e,t){return d.default.createElement("div",{key:"avatar_"+e.id,className:"w-1/3 p-2"},d.default.createElement("img",{src:""+e.url,className:"rounded"}))}))):null,"pilot"===this.props.user.type||"admin"===this.props.currentUser.type&&"pilot"===this.props.user.type?d.default.createElement("div",{className:"mt-6"},d.default.createElement("h3",{className:"font-bold mb-2 text-right"},"Piloting documents"),this.props.user.insurances?this.props.user.insurances.map((function(e,t){return d.default.createElement("article",{className:"my-1",key:"ins_"+t},d.default.createElement("div",{className:"text-right"},d.default.createElement("strong",null,"Insurance")," ",(0,h.dateShort)(e.createdAt)," ",d.default.createElement("strong",null,d.default.createElement("a",{href:""+e.url,target:"_blank"},e.type?e.type:"File"))))})):null,this.props.user.licenses?this.props.user.licenses.map((function(e,t){return d.default.createElement("article",{className:"my-1",key:"lic_"+t},d.default.createElement("div",{className:"text-right"},d.default.createElement("strong",null,"FAA License")," ",(0,h.dateShort)(e.createdAt)," ",d.default.createElement("strong",null,d.default.createElement("a",{href:""+e.url,target:"_blank"},e.type?e.type:"File"))))})):null,s?d.default.createElement("div",null,d.default.createElement("div",{className:"mb-4 mt-6"},d.default.createElement(c.default,{header:"Upload insurance",padding:!0,fileTypeName:"proof of insurance",auto:!0,uploadToId:this.props.user.id,source:"Signup-Insurance",fieldname:"insurance",mimes:"documents",endpoint:"/uploads/insurance",returnUploadInstance:this.returnUploadInstance})),d.default.createElement("div",{className:"mb-4"},d.default.createElement(c.default,{header:"Upload FAA License",padding:!0,auto:!0,uploadToId:this.props.user.id,fileTypeName:"FAA license",source:"Signup-License",fieldname:"license",mimes:"documents",endpoint:"/uploads/license",returnUploadInstance:this.returnUploadInstance}))):null):null)}}]),t}(s.Component);t.default=(0,u.compose)((0,u.graphql)(m.default,{name:"qGetAssets",options:function(e){return{variables:{input:{authorizedId:(0,o.default)(localStorage.getItem("hf_auth_header_token")).id,modelId:e.user.id||(0,o.default)(localStorage.getItem("hf_auth_header_token")).id,modelType:"user",modelName:"avatar"}}}}}),(0,u.graphql)(p.default,{props:function(e){e.ownProps;var t=e.mutate;return{destroyAsset:function(e,a){return t({variables:{input:{id:e,authorizedId:e,modelId:a,modelType:"user",modelName:"avatar"}}})}}}}),(0,u.graphql)(f.default,{props:function(e){var t=e.ownProps,a=e.mutate;return{toggleDefaultAsset:function(e,n){return a({variables:{input:{id:e,authorizedId:e,modelId:n,modelType:"user",modelName:"avatar"}},refetchQueries:[{query:m.default,variables:{input:{authorizedId:(0,o.default)(localStorage.getItem("hf_auth_header_token")).id,modelId:t.userid||(0,o.default)(localStorage.getItem("hf_auth_header_token")).id,modelType:"user",modelName:"avatar"}}}]})}}}}))(v)},916:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation destroyAsset($input: AssetInput) {\n    destroyAsset(input: $input){\n      asset{\n        id\n      }\n    }\n  }\n"],["\n  mutation destroyAsset($input: AssetInput) {\n    destroyAsset(input: $input){\n      asset{\n        id\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},917:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query getUser($input: GetProtectedInput){\n    getUser(input: $input){\n      user{\n        id\n        name\n        email\n        type\n        bio\n        workRadius\n        customerId\n        deactivated\n        accountId\n        isVerified\n        termsAccepted\n        createdAt\n        updatedAt\n        contacts {\n          id\n          type\n          content\n          default\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        avatars {\n          id\n          name\n          type\n          url\n          active\n          default\n          createdAt\n        }\n        licenses {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n        insurances {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n      }\n    }\n  }\n"],["\n  query getUser($input: GetProtectedInput){\n    getUser(input: $input){\n      user{\n        id\n        name\n        email\n        type\n        bio\n        workRadius\n        customerId\n        deactivated\n        accountId\n        isVerified\n        termsAccepted\n        createdAt\n        updatedAt\n        contacts {\n          id\n          type\n          content\n          default\n        }\n        address {\n          address1\n          address2\n          city\n          state\n          zipCode\n          lat\n          lng\n        }\n        avatars {\n          id\n          name\n          type\n          url\n          active\n          default\n          createdAt\n        }\n        licenses {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n        insurances {\n          id\n          name\n          type\n          url\n          createdAt\n        }\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},918:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  query($input: GetFailedMissionsInput){\n    getFailedMissions(input: $input){\n      failedMissions{\n        order{\n          id\n          plan\n          status\n          address{\n            address1\n            address2\n            city\n            state\n            zipCode\n          }\n        }\n        rejectedByUser{\n          id\n          name\n          email\n        }\n        createdAt\n        typeOfFailure\n        reason\n      }\n    }\n  }\n"],["\n  query($input: GetFailedMissionsInput){\n    getFailedMissions(input: $input){\n      failedMissions{\n        order{\n          id\n          plan\n          status\n          address{\n            address1\n            address2\n            city\n            state\n            zipCode\n          }\n        }\n        rejectedByUser{\n          id\n          name\n          email\n        }\n        createdAt\n        typeOfFailure\n        reason\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},919:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation($input: VerifyUserInput) {\n    verifyUser(input: $input){\n      user{\n        id\n        isVerified\n      }\n    }\n  }\n"],["\n  mutation($input: VerifyUserInput) {\n    verifyUser(input: $input){\n      user{\n        id\n        isVerified\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},920:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(a(31)).default)(["\n  mutation ($input: DeactivateUserInput) {\n    deactivateUser(input: $input){\n      user {\n        id\n        deactivated\n      }\n    }\n  }\n"],["\n  mutation ($input: DeactivateUserInput) {\n    deactivateUser(input: $input){\n      user {\n        id\n        deactivated\n      }\n    }\n  }\n"]);function r(e){return e&&e.__esModule?e:{default:e}}var l=(0,r(a(30)).default)(n);t.default=l},921:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(12)),r=u(a(15)),l=u(a(13)),i=u(a(14)),s=a(2),d=u(s);a(16),a(29);function u(e){return e&&e.__esModule?e:{default:e}}var o=[["No Filter",""],["Recruiting","recruiting"],["Pending","pending"],["Filming","filming"],["Uploaded","uploaded"],["Initial Processing","initial_processing"],["Awaiting Review","awaiting_review"],["Final Processing","final_processing"],["Approved/Completed","approved_completed"],["Rejected","rejected"]],c=function(e){function t(e){(0,n.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={filterOpen:!1,orderFilterName:""},a.toggleFilterOpen=a.toggleFilterOpen.bind(a),a.orderStatusSelect=a.orderStatusSelect.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"toggleFilterOpen",value:function(){this.setState({filterOpen:!this.state.filterOpen})}},{key:"orderStatusSelect",value:function(e){var t=e.currentTarget.getAttribute("value"),a=e.currentTarget.getAttribute("title");this.setState({filterOpen:!this.state.filterOpen,orderFilterName:a},(function(){this.props.searchQuery({currentTarget:{value:t,pageType:this.props.pageType}})}))}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"flex flex-wrap"},"order"===this.props.pageType?d.default.createElement("div",{className:"mr-6 w-full md:w-auto mb-2 md:mb-0"},d.default.createElement("div",{className:"dropdown relative inline-block "+(this.state.filterOpen?"is-active":"")},d.default.createElement("div",{className:"dropdown-trigger hover:cursor-pointer",onClick:this.toggleFilterOpen},d.default.createElement("button",{className:"select-faker","aria-haspopup":"true","aria-controls":"dropdown-menu"},d.default.createElement("span",null,this.state.orderFilterName?this.state.orderFilterName:"Order status"),d.default.createElement("span",{className:"inline-block ml-6"},d.default.createElement("i",{className:"fa fa-angle-down","aria-hidden":"true"})))),d.default.createElement("div",{className:"dropdown-menu "+(this.state.filterOpen?"block":"hidden"),id:"dropdown-menu",role:"menu"},d.default.createElement("div",{className:"p-2 flex flex-wrap bg-white border border-grey rounded"},o.map((function(t,a){return d.default.createElement("a",{key:"opts_"+a,pagetype:e.props.pageType,className:"w-full block px-2 py-1 hover:cursor-pointer",onClick:e.orderStatusSelect,value:t[1],title:t[0]},t[0])})))))):null,d.default.createElement("div",{className:"flex-1 w-full md:w-auto"},d.default.createElement("div",{className:"relative"},d.default.createElement("input",{className:"input pl-8",type:"text",name:"queryString",pagetype:this.props.pageType,defaultValue:this.props.queryString,placeholder:this.props.placeHolder,onChange:this.props.searchQuery}),d.default.createElement("span",{className:"input-icon pin-l"},d.default.createElement("i",{className:"fa fa-search"})))))}}]),t}(s.Component);t.default=c}}]);